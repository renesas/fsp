<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>RA Flexible Software Package Documentation: USB Host Mass Storage Class Driver (r_usb_hmsc)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <script type="text/javascript" src="search/lunr.js"></script>
    <link href="search/lunrsearch.css" rel="stylesheet" type="text/css">
    <script src="search/lunr_index.js"></script>
    <script src="search/lunrclient.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_scaled.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RA Flexible Software Package Documentation
   &#160;<span id="projectnumber">Release v3.0.1</span>
   </div>
  </td>
   <td>        <br /><div id="MSearchBox" class="MSearchBoxInactive">
 
    <form id="lunrSearchForm" name="lunrSearchForm">
      <span class="left" >
          <img id="MSearchSelect" src="search/mag_sel.png"
               alt=""/>
         <input class="search-input" id="MSearchField" name="q" placeholder="Search" type="text"> 
      </span>
      <span class="right">
          &nbsp; 
      </span>
        <!--<input type="submit" value="Search">-->
    </form>
</div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___u_s_b___h_m_s_c.html','');});
</script>

<script src="search/mark.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() { 
    var options = {         // allows highlighting across element boundaries.
      "acrossElements": true
    };
    var bodyText = $("div.contents").text(); // try contents instead of body. 
    // If using body: Problem may be that text inside <script> tags is included in .text() - but not in cheerio?
    // If using div.contents - works 
    var fullURL = $(location).attr('href');
    var splitURL = fullURL.split("?");  // Get param string: content after "?" in URL
    if (splitURL.length > 1) {          // If any content after "?"
      var paramStr = splitURL[1];
      var params = paramStr.split("&"); // Split params on "&"
      for (i = 0; i < params.length; i++) {
        var paramPair = params[i].split("=");
        if (paramPair[0] == "pos") {     // If any param starts "pos", get the content after "="
          posStr = paramPair[1];
          var splitPos = posStr.split(",");
          var termArray = [];
        // termArray will have the search terms
            for (i=0; i < splitPos.length; i += 2) {
            start = splitPos[i];
            len = splitPos[i+1]; // Needs error detection! Vulnerable if non-even # of pos entries
            term = bodyText.substr(start,len);
            if (termArray.includes(term) == false) {     // List all unique terms
                termArray.push(bodyText.substr(start,len)); 
            }
          } 
    //      console.log(termArray);
          var context = document.querySelector("div.contents");
          var instance = new Mark(context);
          for(i=0;i<termArray.length; i+=1) {
            instance.mark(termArray[i],options);  // Use Mark.js to mark all terms in termArray
            }    
          var firstMark = document.querySelector("mark");
          firstMark.scrollIntoView(true);
          //      console.log($("mark").first().text()); // Trying to scroll to first Mark element. 
        }
            }
    }
  });
</script>

<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />

<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


<!-- Lunr search results -->
<div id="lunrResultBox" style="
        position: fixed;
        border: 1px solid black;
        background-color: WhiteSmoke;  
        padding: 10px;
        width: 500px;
        height: 500px;
        top: 30;
        right: 0;
        overflow: auto;
        display: none">
    <button onclick="closeLunrResults()" style="float: right;">X</button>
    <div class="resultCount" id="resultCount"></div>
    <div id="searchResults"></div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">USB Host Mass Storage Class Driver (r_usb_hmsc)<div class="ingroups"><a class="el" href="group___r_e_n_e_s_a_s___m_o_d_u_l_e_s.html">Modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae5cbef3743893d8c35aa9fe45c9d6651"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___h_m_s_c.html#gae5cbef3743893d8c35aa9fe45c9d6651">R_USB_HMSC_StorageCommand</a> (<a class="el" href="group___u_s_b___a_p_i.html#ga00a5a797b57dec247564f11056ac7230">usb_ctrl_t</a> *const p_api_ctrl, uint8_t *buf, uint8_t command, uint8_t destination)</td></tr>
<tr class="memdesc:gae5cbef3743893d8c35aa9fe45c9d6651"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processing for MassStorage(ATAPI) command.  <a href="#gae5cbef3743893d8c35aa9fe45c9d6651">More...</a><br /></td></tr>
<tr class="separator:gae5cbef3743893d8c35aa9fe45c9d6651"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaccfdc1d2f97f244fcfbb94c52b03dc3b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___h_m_s_c.html#gaccfdc1d2f97f244fcfbb94c52b03dc3b">R_USB_HMSC_DriveNumberGet</a> (<a class="el" href="group___u_s_b___a_p_i.html#ga00a5a797b57dec247564f11056ac7230">usb_ctrl_t</a> *const p_api_ctrl, uint8_t *p_drive, uint8_t destination)</td></tr>
<tr class="memdesc:gaccfdc1d2f97f244fcfbb94c52b03dc3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of Storage drive.  <a href="#gaccfdc1d2f97f244fcfbb94c52b03dc3b">More...</a><br /></td></tr>
<tr class="separator:gaccfdc1d2f97f244fcfbb94c52b03dc3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7320b74cf0e524e1ab5f038c80663fda"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___h_m_s_c.html#ga7320b74cf0e524e1ab5f038c80663fda">R_USB_HMSC_SemaphoreGet</a> (void)</td></tr>
<tr class="memdesc:ga7320b74cf0e524e1ab5f038c80663fda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a semaphore. (RTOS only)  <a href="#ga7320b74cf0e524e1ab5f038c80663fda">More...</a><br /></td></tr>
<tr class="separator:ga7320b74cf0e524e1ab5f038c80663fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06eed41115834790213c720d27cf2a1e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___h_m_s_c.html#ga06eed41115834790213c720d27cf2a1e">R_USB_HMSC_SemaphoreRelease</a> (void)</td></tr>
<tr class="memdesc:ga06eed41115834790213c720d27cf2a1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a semaphore. (RTOS only)  <a href="#ga06eed41115834790213c720d27cf2a1e">More...</a><br /></td></tr>
<tr class="separator:ga06eed41115834790213c720d27cf2a1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa79dafa161ab34b91125136493f4a547"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___h_m_s_c.html#gaa79dafa161ab34b91125136493f4a547">R_USB_HMSC_StorageReadSector</a> (uint16_t drive_number, uint8_t *const buff, uint32_t sector_number, uint16_t sector_count)</td></tr>
<tr class="memdesc:gaa79dafa161ab34b91125136493f4a547"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read sector information.  <a href="#gaa79dafa161ab34b91125136493f4a547">More...</a><br /></td></tr>
<tr class="separator:gaa79dafa161ab34b91125136493f4a547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87590ff490e5f422294773bfbc8ab1ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___h_m_s_c.html#ga87590ff490e5f422294773bfbc8ab1ce">R_USB_HMSC_StorageWriteSector</a> (uint16_t drive_number, uint8_t const *const buff, uint32_t sector_number, uint16_t sector_count)</td></tr>
<tr class="memdesc:ga87590ff490e5f422294773bfbc8ab1ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write sector information.  <a href="#ga87590ff490e5f422294773bfbc8ab1ce">More...</a><br /></td></tr>
<tr class="separator:ga87590ff490e5f422294773bfbc8ab1ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module provides a USB Host Mass Storage Class (HMSC) driver. It implements the <a class="el" href="group___u_s_b___h_m_s_c___a_p_i.html">USB HMSC Interface</a>. </p>
<h1><a class="anchor" id="r-usb_hmsc-overview"></a>
Overview</h1>
<p>The r_usb_hmsc module, when used in combination with the r_usb_basic module, operates as a USB Host Mass Storage Class (HMSC) driver. It is built on the USB Mass Storage Class Bulk-Only Transport (BOT) protocol. It is possible to communicate with BOT-compatible USB storage devices by combining this module with a file system and storage device driver.</p>
<dl class="section note"><dt>Note</dt><dd>This module should be used in combination with the FreeRTOS+FAT File System.</dd></dl>
<h2><a class="anchor" id="r-usb_hmsc-features"></a>
Features</h2>
<p>The r_usb_hmsc module has the following key features:</p>
<ul>
<li>Checking of connected USB storage devices to determine whether or not operation is supported</li>
<li>Storage command communication using the BOT protocol</li>
<li>Support for SFF-8070i (ATAPI) USB mass storage subclass</li>
<li>Sharing of a single pipe for IN/OUT directions or multiple devices</li>
<li>Supports up to 4 connected USB storage devices</li>
</ul>
<h2>Class Requests</h2>
<p>The class requests supported by this driver are shown below.</p>
<table class="doxtable">
<tr>
<th align="left">Request </th><th align="left">Description  </th></tr>
<tr>
<td align="left">GetMaxLun </td><td align="left">Gets the maximum number of units that are supported. </td></tr>
<tr>
<td align="left">MassStorageReset </td><td align="left">Cancels a protocol error. </td></tr>
</table>
<h2>Storage Commands</h2>
<p>This driver supports the following storage commands:</p>
<ul>
<li>TEST_UNIT_READY</li>
<li>MODE_SELECT10</li>
<li>MODE_SENSE10</li>
<li>PREVENT_ALLOW</li>
<li>READ_FORMAT_CAPACITY</li>
<li>READ10</li>
<li>WRITE10</li>
</ul>
<h1><a class="anchor" id="r-usb_hmsc-configuration"></a>
Configuration</h1>
<p>Refer to the <a class="el" href="group___u_s_b.html">USB (r_usb_basic)</a> module.</p>
<h2><a class="anchor" id="r-usb_hmsc-clock-configuration"></a>
Clock Configuration</h2>
<p>Refer to the <a class="el" href="group___u_s_b.html">USB (r_usb_basic)</a> module.</p>
<h2><a class="anchor" id="r-usb_hmsc-pin-configuration"></a>
Pin Configuration</h2>
<p>Refer to the <a class="el" href="group___u_s_b.html">USB (r_usb_basic)</a> module.</p>
<h1><a class="anchor" id="r-usb_hmsc-usage_notes"></a>
Usage Notes</h1>
<dl class="section warning"><dt>Warning</dt><dd>Due to the wide variety of USB mass storage device implementations, this driver is not guaranteed to work with all devices. When implementing the driver it is important to verify correct operation with the mass storage devices that the end user is expected to use.</dd></dl>
<h2>Multi Port</h2>
<p>This driver supports simultaneous operation with Peripheral Communication Device Class(PCDC). If the user are using MCU that supports 2 USB modules, such as RA6M3, the user can run HMSC on one USB module and PCDC on the other. This driver does not support simultaneous operation using device classes other than PCDC.</p>
<h2><a class="anchor" id="r-usb_hmsc-limitations"></a>
Limitations</h2>
<ol type="1">
<li>Some MSC devices may be unable to connect because they are not recognized as storage devices.</li>
<li>MSC devices that return values of 1 or higher in response to the GetMaxLun command (mass storage class command) are not supported.</li>
<li>A maximum of 4 USB storage devices can be connected.</li>
<li>Only USB storage devices with a sector size of 512 bytes can be connected.</li>
<li>A device that does not respond to the READ_CAPACITY command operates as a device with a sector size of 512 bytes.</li>
<li>The continuous transfer mode cannot be used when using DMA.</li>
<li>This module must be incorporated into a project using r_usb_basic and does not provide any public APIs.</li>
<li>This driver does not support Low-speed.</li>
</ol>
<h1><a class="anchor" id="r-usb_hmsc-examples"></a>
Examples</h1>
<h2>USB HMSC Example</h2>
<p><b>Example Operating Environment</b></p>
<p>The following shows an example operating environment for the HMSC.</p>
<p>Refer to the associated instruction manuals for details on setting up the evaluation board and using the emulator, etc.</p>
<div class="image">
<img src="r_usb_hmsc_operating_environment.png" alt="r_usb_hmsc_operating_environment.png"/>
<div class="caption">
Example Operating Environment</div></div>
 <h3>Application Specifications</h3>
<p>The main functions of the application are as follows:</p>
<ol type="1">
<li>Performs enumeration and drive recognition processing on MSC devices.</li>
<li>After the above processsing finisihes, the application writes the file <code>hmscdemo.txt</code> to the MSC device once.</li>
<li>After writing the above file, the APL repeatedly reads the file <code>hmscdemo.txt</code>. It continues to read the file repeatedly until the switch is pressed again.</li>
</ol>
<h3>Application Processing (for RTOS)</h3>
<p>This application has two tasks. An overview of the processing in these two tasks is provided below.</p>
<p><b>usb_apl_task</b></p>
<ol type="1">
<li>After start up, MCU pin setting, USB controller initialization, and application program initialization are performed.</li>
<li>The MSC device is attached to the kit. When enumeration and drive recognition processing have completed, the USB driver calls the callback function (usb_apl_callback). In the callback function (usb_apl_callback), the application task is notified of the USB completion event using the FreeRTOS functionality.</li>
<li>In the application task, information regarding the USB completion event about which notification was received from the callback function is retrieved using the real-time OS functionality.</li>
<li>If the USB completion event (the event member of the usb_ctrl_t structure) retrieved in step 2 above is USB_STS_CONFIGURED then, based on the USB completion event, the MSC device is mounted and the file is written to the MSC device.</li>
<li>If the USB completion event (the event member of the usb_ctrl_t structure) retrieved in step 2 above is USB_STS_DETACH, the application initializes the variables for state management.</li>
</ol>
<div class="image">
<img src="r_usb_hmsc_task_flow_sample.png" alt="r_usb_hmsc_task_flow_sample.png"/>
<div class="caption">
usb_apl_task</div></div>
<p> <b>file_read_task</b></p>
<p>Of the application tasks usb_apl_task and file_read_task, file_read_task is processed while usb_apl_task is in the wait state. This task performs file read processing on the file that was written to the MSC device (<code>hmscdemo.txt</code>).</p>
<h3>Example Code</h3>
<dl class="section note"><dt>Note</dt><dd>For example code refer to the <a class="el" href="group___r_m___f_r_e_e_r_t_o_s___p_l_u_s___f_a_t.html#rm-freertos-plus-fat-examples">FreeRTOS + FAT example.</a></dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae5cbef3743893d8c35aa9fe45c9d6651"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae5cbef3743893d8c35aa9fe45c9d6651">&#9670;&nbsp;</a></span>R_USB_HMSC_StorageCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_USB_HMSC_StorageCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___u_s_b___a_p_i.html#ga00a5a797b57dec247564f11056ac7230">usb_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>destination</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processing for MassStorage(ATAPI) command. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Success. </td></tr>
    <tr><td class="paramname">FSP_ERR_USB_FAILED</td><td>The function could not be completed successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Parameter Null pointer error. </td></tr>
    <tr><td class="paramname">FSP_ERR_USB_PARAMETER</td><td>Parameter error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaccfdc1d2f97f244fcfbb94c52b03dc3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaccfdc1d2f97f244fcfbb94c52b03dc3b">&#9670;&nbsp;</a></span>R_USB_HMSC_DriveNumberGet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_USB_HMSC_DriveNumberGet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___u_s_b___a_p_i.html#ga00a5a797b57dec247564f11056ac7230">usb_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_drive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>destination</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get number of Storage drive. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Success. </td></tr>
    <tr><td class="paramname">FSP_ERR_USB_FAILED</td><td>The function could not be completed successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Parameter Null pointer error. </td></tr>
    <tr><td class="paramname">FSP_ERR_USB_PARAMETER</td><td>Parameter error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7320b74cf0e524e1ab5f038c80663fda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7320b74cf0e524e1ab5f038c80663fda">&#9670;&nbsp;</a></span>R_USB_HMSC_SemaphoreGet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_USB_HMSC_SemaphoreGet </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a semaphore. (RTOS only) </p>
<p>If this function is called in the OS less execution environment, a failure is returned. </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Success. </td></tr>
    <tr><td class="paramname">FSP_ERR_USB_FAILED</td><td>The function could not be completed successfully. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga06eed41115834790213c720d27cf2a1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06eed41115834790213c720d27cf2a1e">&#9670;&nbsp;</a></span>R_USB_HMSC_SemaphoreRelease()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_USB_HMSC_SemaphoreRelease </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release a semaphore. (RTOS only) </p>
<p>If this function is called in the OS less execution environment, a failure is returned. </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Success. </td></tr>
    <tr><td class="paramname">FSP_ERR_USB_FAILED</td><td>The function could not be completed successfully. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa79dafa161ab34b91125136493f4a547"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa79dafa161ab34b91125136493f4a547">&#9670;&nbsp;</a></span>R_USB_HMSC_StorageReadSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_USB_HMSC_StorageReadSector </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>drive_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *const&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>sector_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sector_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read sector information. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Success. </td></tr>
    <tr><td class="paramname">FSP_ERR_USB_FAILED</td><td>The function could not be completed successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Parameter Null pointer error. </td></tr>
    <tr><td class="paramname">FSP_ERR_USB_PARAMETER</td><td>Parameter error. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The address specified in the argument buff must be 4-byte aligned. </dd></dl>

</div>
</div>
<a id="ga87590ff490e5f422294773bfbc8ab1ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87590ff490e5f422294773bfbc8ab1ce">&#9670;&nbsp;</a></span>R_USB_HMSC_StorageWriteSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_USB_HMSC_StorageWriteSector </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>drive_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t const *const&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>sector_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sector_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write sector information. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Success. </td></tr>
    <tr><td class="paramname">FSP_ERR_USB_FAILED</td><td>The function could not be completed successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Parameter Null pointer error. </td></tr>
    <tr><td class="paramname">FSP_ERR_USB_PARAMETER</td><td>Parameter error. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The address specified in the argument buff must be 4-byte aligned. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
        <li class="footer">FSP Release v3.0.1 User's Manual Copyright Â© (2021) Renesas Electronics Corporation. All Rights Reserved.</li>
  </ul>
</div>
</body>
</html>
