<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>RA Flexible Software Package Documentation: Universal Serial Bus Peripheral Communication Device Class (r_usb_pcdc)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_scaled.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RA Flexible Software Package Documentation
   &#160;<span id="projectnumber">Release v0.8.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___u_s_b___p_c_d_c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Universal Serial Bus Peripheral Communication Device Class (r_usb_pcdc)<div class="ingroups"><a class="el" href="group___r_e_n_e_s_a_s___m_o_d_u_l_e_s.html">Modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p><br />
This module is USB Peripheral Communication Device Class Driver (PCDC). <br />
This module works in combination with (r_usb_basic module). </p>
<h1><a class="anchor" id="r-usb_pcdc-overview"></a>
Overview</h1>
<p><br />
The r_usb_pcdc module combines with the r_usb_basic module to provide USB Peripheral It operates as a communication device class driver (hereinafter referred to as PCDC). <br />
PCDC conforms to Abstract Control Model of USB communication device class specification (hereinafter referred to as CDC) and can communicate with USB host.</p>
<h2><a class="anchor" id="r-usb_pcdc-features"></a>
Features</h2>
<p><br />
The r_usb_pcdc module has the following key features:</p><ul>
<li>Data transfer to and from a USB host.</li>
<li>Response to CDC class requests.</li>
<li>Provision of communication device class notification transmit service.</li>
</ul>
<h3>Basic Functions</h3>
<p><br />
CDC conforms to the communication device class specification Abstract Control Model subclass.</p>
<h3>Abstract Control Model Overview</h3>
<p>The Abstract Control Model subclass of CDC is a technology that bridges the gap between USB devices and earlier modems (employing RS-232C connections), enabling use of application programs designed for older modems. The class requests and class notifications supported are listed below.</p>
<h3>Class Requests (Host to Peripheral)</h3>
<p>This driver notifies to the application program when receiving the following class request.</p>
<table class="doxtable">
<tr>
<th align="left">Request </th><th align="left">Code </th><th align="left">Description  </th></tr>
<tr>
<td align="left">SetLineCoding </td><td align="left">0x20 </td><td align="left">Makes communication line settings <br />
 (communication speed, data length,parity bit, and stop bit length). </td></tr>
<tr>
<td align="left">GetLineCoding </td><td align="left">0x21 </td><td align="left">Acquires the communication line setting state. </td></tr>
<tr>
<td align="left">SetControlLineState </td><td align="left">0x22 </td><td align="left">Makes communication line control signal (RTS,DTR) settings. </td></tr>
</table>
<p>For details concerning the Abstract Control Model requests, refer to Table 11, [Requests - Abstract Control Model] in [USB Communications Class Subclass Specification for PSTN Devices], Revision 1.2.</p>
<h3>Data Format of Class Requests</h3>
<p>The data format of the class requests supported by the class driver software is described below.</p>
<p><b>1.SetLineCoding</b></p>
<p>This is the class request the host transmits to perform the UART line setting. <br />
The SetLineCoding data format is shown below.</p>
<p>SetLineCoding Format</p>
<table class="doxtable">
<tr>
<th align="center">bmRequestType t </th><th align="center">bRequest </th><th align="center">wValue </th><th align="center">wIndex </th><th align="center">wLength </th><th align="left">Data  </th></tr>
<tr>
<td align="center">0x21 </td><td align="center">SET_LINE_CODING(0x20) </td><td align="center">0x00 </td><td align="center">0x0 </td><td align="center">0x07 </td><td align="left">Line Coding Structure </td></tr>
</table>
<p>Line Coding Structure</p>
<table class="doxtable">
<tr>
<th align="center">Offset </th><th align="center">Field </th><th align="center">Size </th><th align="center">Value </th><th align="left">Description  </th></tr>
<tr>
<td align="center">0 </td><td align="center">DwDTERate </td><td align="center">4 </td><td align="center">Number </td><td align="left">Data terminal speed (bps) </td></tr>
<tr>
<td align="center">4 </td><td align="center">BcharFormat </td><td align="center">1 </td><td align="center">Number </td><td align="left">Stop bits:<br />
0 - 1 stop bit<br />
1 - 1.5 stop bits<br />
1 - 1.5 stop bits<br />
2 - 2 stop bits </td></tr>
<tr>
<td align="center">5 </td><td align="center">BparityType </td><td align="center">1 </td><td align="center">Number </td><td align="left">Parity:<br />
0 - None<br />
1 - Odd<br />
2 - Even </td></tr>
<tr>
<td align="center">6 </td><td align="center">BdataBits </td><td align="center">1 </td><td align="center"></td><td align="left">Data bits (5, 6, 7, 8) </td></tr>
</table>
<p><b>2.GetLineCoding</b></p>
<p>This is the class request the host transmits to request the UART line state. <br />
 The GetLineCoding data format is shown below.</p>
<p>GetLineCoding Format</p>
<table class="doxtable">
<tr>
<th align="center">bmRequestType t </th><th align="center">bRequest </th><th align="center">wValue </th><th align="center">wIndex </th><th align="center">wLength </th><th align="left">Data  </th></tr>
<tr>
<td align="center">0xA1 </td><td align="center">GET_LINE_CODING(0x21) </td><td align="center">0x00 </td><td align="center">0x0 </td><td align="center">0x07 </td><td align="left">Line Coding Structure </td></tr>
</table>
<p><b>3.SetControlLineState</b></p>
<p>This is a class request that the host sends to set up the signal for flow controls of UART. <br />
This software does not support RTS/DTR control. <br />
The SET_CONTROL_LINE_STATE data format is shown below.</p>
<p>SET_CONTROL_LINE_STATE Format</p>
<table class="doxtable">
<tr>
<th align="center">bmRequestType t </th><th align="left">bRequest </th><th align="left">wValue </th><th align="center">wIndex </th><th align="center">wLength </th><th align="left">Data  </th></tr>
<tr>
<td align="center">0x21 </td><td align="left">SET_CONTROL_LINE_STATE(0x22) </td><td align="left">Control Signal Bitmap </td><td align="center">0x0 </td><td align="center">0x00 </td><td align="left">None </td></tr>
</table>
<p>Control Signal Bitmap</p>
<table class="doxtable">
<tr>
<th align="left">Bit Position </th><th align="left">Description  </th></tr>
<tr>
<td align="left">D15 to D2 </td><td align="left">Reserved (reset to 0) </td></tr>
<tr>
<td align="left">D1 </td><td align="left">DCE transmit function control:<br />
0 - RTS Off<br />
1 - RTS On </td></tr>
<tr>
<td align="left">D0 </td><td align="left">Notification of DTE ready state:<br />
0 - DTR Off<br />
1 - DTR On </td></tr>
</table>
<h3>Class Notifications (Peripheral to Host)</h3>
<p>The table below shows the class notification support / non-support of this S / W.</p>
<table class="doxtable">
<tr>
<th align="left">Notification </th><th align="center">Code </th><th align="left">Description </th><th align="left">Supported  </th></tr>
<tr>
<td align="left">NETWORK_CONNECTION </td><td align="center">0x00 </td><td align="left">Notification of network connection state </td><td align="left">No </td></tr>
<tr>
<td align="left">RESPONSE_AVAILABLE </td><td align="center">0x01 </td><td align="left">Response to GET_ENCAPSLATED_RESPONSE </td><td align="left">No </td></tr>
<tr>
<td align="left">SERIAL_STATE </td><td align="center">0x20 </td><td align="left">Notification of serial line state </td><td align="left">Yes </td></tr>
</table>
<p><b>1.Serial State</b></p>
<p>The host is notified of the serial state when a change in the UART port state is detected. <br />
This software supports the detection of overrun, parity and framing errors. A state notification is performed when a change from normal state to error is detected. However, notification is not continually transmitted when an error is continually detected.</p>
<p>SerialState Format</p>
<table class="doxtable">
<tr>
<th align="center">bmRequestType t </th><th align="left">bRequest </th><th align="center">wValue </th><th align="center">wIndex </th><th align="center">wLength </th><th align="left">Data  </th></tr>
<tr>
<td align="center">0xA1 </td><td align="left">SERIAL_STATE(0x20) </td><td align="center">0x00 </td><td align="center">0x0 </td><td align="center">0x02 </td><td align="left">UART State bitmap </td></tr>
</table>
<p>UART state bitmap format</p>
<table class="doxtable">
<tr>
<th align="left">Bits </th><th align="left">Fieeld </th><th align="left">Description </th><th align="center">Supported  </th></tr>
<tr>
<td align="left">D15 to D7 </td><td align="left"></td><td align="left">Reserved </td><td align="center">- </td></tr>
<tr>
<td align="left">D6 </td><td align="left">b_over_run </td><td align="left">Overrun error detected </td><td align="center">Yes </td></tr>
<tr>
<td align="left">D5 </td><td align="left">b_parity </td><td align="left">Parity error detected </td><td align="center">Yes </td></tr>
<tr>
<td align="left">D4 </td><td align="left">b_framing </td><td align="left">Framing error detected </td><td align="center">Yes </td></tr>
<tr>
<td align="left">D3 </td><td align="left">b_ring_signal </td><td align="left">INCOMING signal (ring signal) detected </td><td align="center">No </td></tr>
<tr>
<td align="left">D2 </td><td align="left">b_break </td><td align="left">Break signal detected </td><td align="center">No </td></tr>
<tr>
<td align="left">D1 </td><td align="left">btx_arrier </td><td align="left">Data Set Ready: Line connected and ready for communication </td><td align="center">No </td></tr>
<tr>
<td align="left">D0 </td><td align="left">brx_carrier </td><td align="left">Data Carrier Detect: Carrier detected on line </td><td align="center">No </td></tr>
</table>
<h3>PC Virtual COM-port Usage</h3>
<p>The CDC device can be used as a virtual COM port when operating in Windows OS. <br />
Use a PC running Windows OS, and connect an board. After USB enumeration, the CDC class requests GetLineCoding and SetControlLineState are executed by the target, and the CDC device is registered in Windows Device Manager as a virtual COM device. <br />
Registering the CDC device as a virtual COM-port in Windows Device Manager enables data communication with the CDC device via a terminal app such as [HyperTerminal] which comes standard with Windows OS. When changing settings of the serial port in the Windows terminal application, the UART setting is propagated to the firmware via the class request SetLineCoding. <br />
Data input (or file transmission) from the terminal app window is transmitted to the board using endpoint 2 (EP2); data from the board side is transmitted to the PC using EP1. <br />
When the last packet of data received is the maximum packet size, and the terminal determines that there is continuous data, the received data may not be displayed in the terminal. If the received data is smaller than the maximum packet size, the data received up to that point is displayed in the terminal. <br />
The received data is outputted on the terminal when the data less than Maximum packet size is received. <br />
 </p>
<h1><a class="anchor" id="r-usb_pcdc-configuration"></a>
Configuration</h1>
<p><br />
<h2>Build Time Configurations for r_usb_pcdc</h2>
The following build time configurations are defined in fsp_cfg/r_usb_pcdc_cfg.h:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Description </th></tr>
<tr>
<td>Select which pipe to use for bulk IN transfer during PCDC operation.</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Using USB PIPE1</li>
<li>
Using USB PIPE2</li>
<li>
Using USB PIPE3</li>
<li>
Using USB PIPE4</li>
<li>
Using USB PIPE5</li>
</ul>
</td><td>Please choose between 1 and 5. </td></tr>
<tr>
<td>Select which pipe to use for bulk OUT transfer during PCDC operation.</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Using USB PIPE1</li>
<li>
Using USB PIPE2</li>
<li>
Using USB PIPE3</li>
<li>
Using USB PIPE4</li>
<li>
Using USB PIPE5</li>
</ul>
</td><td>Please choose between 1 and 5. </td></tr>
<tr>
<td>Select which pipe to use for Interrupt IN transfer during PCDC operation.</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Using USB PIPE6</li>
<li>
Using USB PIPE7</li>
<li>
Using USB PIPE8</li>
<li>
Using USB PIPE9</li>
</ul>
</td><td>Please choose between 6 and 9. </td></tr>
</table>
 <h2>Configurations for USB PCDC driver on r_usb_pcdc</h2>
This module can be added to the Threads tab from New -&gt; Middleware -&gt; USB -&gt; USB PCDC driver on r_usb_pcdc:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Description </th></tr>
<tr>
<td>Name</td><td>Name must be a valid C symbol</td><td>Module name. </td></tr>
</table>
 Setting as r_usb_pcdc module is not necessary. <br />
Refer to r_usb_basic module.</p>
<h2><a class="anchor" id="r-usb_pcdc-clock-configuration"></a>
Clock Configuration</h2>
<p><br />
Refer to r_usb_basic module.</p>
<h2><a class="anchor" id="r-usb_pcdc-pin-configuration"></a>
Pin Configuration</h2>
<p><br />
Refer to r_usb_basic module.</p>
<h1><a class="anchor" id="r-usb_pcdc-usage_notes"></a>
Usage Notes</h1>
<h2><a class="anchor" id="r-usb_pcdc-limitations"></a>
Limitations</h2>
<p><br />
This module needs to be incorporated into a project using r_usb_basic. Once incorporated into a project, use the API to perform USB H / W control.</p>
<h1><a class="anchor" id="r-usb_pcdc-examples"></a>
Examples</h1>
<h2>USB PCDC Example</h2>
<p><b>Example Operating Environment</b> <br />
The following shows an example of the operating environment for the PCDC echo mode. <br />
Refer to the associated instruction manuals for details on setting up the evaluation board and using the emulator, etc. <br />
 </p><div class="image">
<img src="r_usb_pcdc_operating_environment_echo.png" alt="r_usb_pcdc_operating_environment_echo.png"/>
<div class="caption">
Example Operating Environment</div></div>
 <h3>Application Specifications</h3>
<p><br />
The main functions of the APL are as follows:</p>
<ol type="1">
<li>Echo mode (Loopback mode) <br />
Transmits data received from the USB host back to the USB host. <br />
</li>
<li>Low-power functionality <br />
This functionality transitions the MCU to low-power mode according to the status of the USB. <br />
a) The APL transitions the MCU to sleep mode when the USB is suspended. <br />
b) When the USB is detached (disconnected), the APL transitions the MCU to software standby mode.</li>
</ol>
<h3>Application Processing (for RTOS)</h3>
<p>The APL comprises two parts: initial settings and main loop. An overview of the processing in these two parts is provided below.</p>
<p><b>Initial Setting</b></p>
<p>Initial settings consist of MCU pin settings, USB driver settings, and initial settings to the USB controller.</p>
<p><b>Main Loop (Echo mode)</b></p>
<p>In Echo mode, loop-back processing in which data sent by the USB host is received and then transmitted unmodified back to the USB host takes place as part of the main routine. An overview of the processing performed by the loop is shown below.</p>
<ol type="1">
<li>When a USB-related event has completed, the USB driver calls the callback function (usb_apl_callback). In the callback function (usb_apl_callback), the application task (APL) is notified of the USB completion event using the real-time OS functionality.</li>
<li>In APL, information regarding the USB completion event was notified from the callback function is retrieved using the real-time OS functionality.</li>
<li>If the USB completion event (the event member of the usb_ctrl_t structure) retrieved in step 2 above is USB_STS_CONFIGURED, APL performs a data reception request to receive data transmitted from the USB Host by calling the R_USB_Read function.</li>
<li>If the USB completion event (the event member of the usb_ctrl_t structure) retrieved in step 2 above is USB_STS_REQUEST, APL performs processing in response to the received request.</li>
<li>If the USB completion event (the event member of the usb_ctrl_t structure) retrieved in step 2 above is USB_STS_READ_COMPLETE, APL performs a data transmission request to send USB Host the reception data by calling the R_USB_Write function.</li>
<li>If the USB completion event (the event member of the usb_ctrl_t structure) retrieved in step 2 above is USB_STS_WRITE_COMPLETE, APL performs a data reception request to receive the data sent from USB Host by calling the R_USB_Read function.</li>
<li>If the USB completion event (the event member of the usb_ctrl_t structure) retrieved in step 2 above is USB_STS_SUSPEND or USB_STS_DETACH, APL performs processing to transition the CDC device to low-power mode.</li>
</ol>
<div class="image">
<img src="r_usb_pcdc_task_flow_sample.png" alt="r_usb_pcdc_task_flow_sample.png"/>
<div class="caption">
Main Loop processing (Echo mode)</div></div>
 <h3>Descriptor</h3>
<p>A template for PCDC descriptors can be found in ra/fsp/src/r_usb_pcdc/r_usb_pcdc_descriptor.c.template. Also, please be sure to use your vendor ID.</p>
<p><br />
This is a pcdc example of minimal use of the USB in an application.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> usb_basic_example (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___u_s_b.html#structusb__instance__ctrl__t">usb_instance_ctrl_t</a>     ctrl;</div><div class="line">    usb_instance_transfer_t trans;</div><div class="line">    <a class="code" href="group___u_s_b___a_p_i.html#ga56bea25fbffdbda134044c49d40d5e40">usb_status_t</a>            event;</div><div class="line">    usb_setup_t             setup;</div><div class="line"></div><div class="line">    trans.<a class="code" href="group___u_s_b.html#a4b47aee2b2f67c3ef24dabe958c57c39">module_number</a> = USB_CFG_USE_USBIP;</div><div class="line">    trans.type = <a class="code" href="group___u_s_b___a_p_i.html#ggab1dc4a2240edf1a50cca3945f31dc9f2a80c133e3ac3ddabc6aa656c3daf78c5e">USB_CLASS_PCDC</a>;</div><div class="line">    g_usb0_cfg.p_usb_reg  = (usb_descriptor_t *)&amp;usb_descriptor;</div><div class="line">    g_usb_on_usb.<a class="code" href="group___u_s_b___a_p_i.html#aefa767fa78b481c328020e9b1a9b5812">open</a>(&amp;ctrl, &amp;g_usb0_cfg, &amp;trans);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Loop back between PC(TerminalSoft) and USB MCU */</span></div><div class="line">    <span class="keywordflow">while</span> (1)</div><div class="line">    {</div><div class="line">        g_usb_on_usb.<a class="code" href="group___u_s_b___a_p_i.html#a3acf29ae5b0455d82149e36b5387d02d">eventGet</a>(&amp;ctrl, &amp;event);</div><div class="line">        <span class="keywordflow">switch</span> (event)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group___u_s_b___a_p_i.html#gga56bea25fbffdbda134044c49d40d5e40ab5c3bd23fe62533150eef3a4e8c8d13c">USB_STATUS_CONFIGURED</a> :</div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group___u_s_b___a_p_i.html#gga56bea25fbffdbda134044c49d40d5e40ad44448290b4f36868a09b48e4588b29d">USB_STATUS_WRITE_COMPLETE</a> :</div><div class="line">                trans.type = <a class="code" href="group___u_s_b___a_p_i.html#ggab1dc4a2240edf1a50cca3945f31dc9f2a80c133e3ac3ddabc6aa656c3daf78c5e">USB_CLASS_PCDC</a>;</div><div class="line">                g_usb_on_usb.<a class="code" href="group___u_s_b___a_p_i.html#a317d4d11197c2e1887130a6b1b29c35d">read</a>(&amp;ctrl, g_buf, DATA_LEN, &amp;trans);</div><div class="line"></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group___u_s_b___a_p_i.html#gga56bea25fbffdbda134044c49d40d5e40a63dd4552584256ef9d1a0d5da2159e9c">USB_STATUS_READ_COMPLETE</a> :</div><div class="line">                g_usb_on_usb.<a class="code" href="group___u_s_b___a_p_i.html#a7d33458c053260c73b63c11e413ca095">write</a>(&amp;ctrl, g_buf, ctrl.<a class="code" href="group___u_s_b.html#a98a330aeb2bc41c3294edfdade8d6aa2">data_size</a>, &amp;trans);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group___u_s_b___a_p_i.html#gga56bea25fbffdbda134044c49d40d5e40a8b49ebc4d15054963bdbe8d843a2cf5a">USB_STATUS_REQUEST</a> : <span class="comment">/* Receive Class Request */</span></div><div class="line">                g_usb_on_usb.<a class="code" href="group___u_s_b___a_p_i.html#ad8db912b4559ccc2868453044273c645">setupget</a>(&amp;ctrl, &amp;setup);</div><div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group___u_s_b___p_c_d_c___a_p_i.html#ga9e76ac14dae5e5e44b5df6e8cbee6bd0">USB_PCDC_SET_LINE_CODING</a> == (setup.request_type &amp; <a class="code" href="group___u_s_b___a_p_i.html#ga3a6743f3e336fc05e70e59b05206f634">USB_BREQUEST</a>))</div><div class="line">                {</div><div class="line">                    trans.type = <a class="code" href="group___u_s_b___a_p_i.html#ggab1dc4a2240edf1a50cca3945f31dc9f2ac5ba0e58af39bb09ef467e27446a2d58">USB_CLASS_REQUEST</a>;</div><div class="line">                    trans.setup = setup;</div><div class="line">                    g_usb_on_usb.<a class="code" href="group___u_s_b___a_p_i.html#a317d4d11197c2e1887130a6b1b29c35d">read</a>(&amp;ctrl, (uint8_t *) &amp;g_line_coding, LINE_CODING_LENGTH, &amp;trans);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group___u_s_b___p_c_d_c___a_p_i.html#ga3e7ae95dcfc42bd8912fe18339893d82">USB_PCDC_GET_LINE_CODING</a> == (setup.request_type &amp; <a class="code" href="group___u_s_b___a_p_i.html#ga3a6743f3e336fc05e70e59b05206f634">USB_BREQUEST</a>))</div><div class="line">                {</div><div class="line">                    trans.type = <a class="code" href="group___u_s_b___a_p_i.html#ggab1dc4a2240edf1a50cca3945f31dc9f2ac5ba0e58af39bb09ef467e27446a2d58">USB_CLASS_REQUEST</a>;</div><div class="line">                    trans.setup = setup;</div><div class="line">                    g_usb_on_usb.<a class="code" href="group___u_s_b___a_p_i.html#a7d33458c053260c73b63c11e413ca095">write</a>(&amp;ctrl, (uint8_t *) &amp;g_line_coding, LINE_CODING_LENGTH, &amp;trans);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    <span class="comment">/* none */</span></div><div class="line">                }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group___u_s_b___a_p_i.html#gga56bea25fbffdbda134044c49d40d5e40adb879552af43dda95b70261eaa810777">USB_STATUS_SUSPEND</a> :</div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group___u_s_b___a_p_i.html#gga56bea25fbffdbda134044c49d40d5e40ae9bcf94bdb90960ca692b1dfecb98e78">USB_STATUS_DETACH</a> :</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">            default :</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">} <span class="comment">/* End of function usb_main() */</span></div><div class="line"></div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
        <li class="footer">FSP v0.8.0 User's Manual Rev0.80 R11UM0137EU0080 Copyright Â© (2019) Renesas Electronics Corporation. All Rights Reserved.</li>
    <li class="footer">Generated by FSP v0.8.0
    </li>
  </ul>
</div>
</body>
</html>
