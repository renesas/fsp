<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>RA Flexible Software Package Documentation: Ethernet (r_ether)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_scaled.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RA Flexible Software Package Documentation
   &#160;<span id="projectnumber">Release v0.8.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___e_t_h_e_r.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">Ethernet (r_ether)<div class="ingroups"><a class="el" href="group___r_e_n_e_s_a_s___m_o_d_u_l_e_s.html">Modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab2b878c7b67357c06e1f9231265819fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#gab2b878c7b67357c06e1f9231265819fd">R_ETHER_Open</a> (<a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const p_ctrl, <a class="el" href="group___e_t_h_e_r___a_p_i.html#structether__cfg__t">ether_cfg_t</a> const *const p_cfg)</td></tr>
<tr class="memdesc:gab2b878c7b67357c06e1f9231265819fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">After ETHERC, EDMAC and PHY-LSI are reset in software, an auto negotiation of PHY-LSI is begun. Afterwards, the link signal change interrupt is permitted. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#ae75458ac2a31861195b73120676d670c">ether_api_t::open</a>.  <a href="#gab2b878c7b67357c06e1f9231265819fd">More...</a><br /></td></tr>
<tr class="separator:gab2b878c7b67357c06e1f9231265819fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafbd25f2b961e8e2a807444f04e08d158"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#gafbd25f2b961e8e2a807444f04e08d158">R_ETHER_Close</a> (<a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const p_ctrl)</td></tr>
<tr class="memdesc:gafbd25f2b961e8e2a807444f04e08d158"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables interrupts. Removes power and releases hardware lock. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#a1c0bc3caef73e0a216c2fe2edc4fff4b">ether_api_t::close</a>.  <a href="#gafbd25f2b961e8e2a807444f04e08d158">More...</a><br /></td></tr>
<tr class="separator:gafbd25f2b961e8e2a807444f04e08d158"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga705e2527edcde11a56d7b0114fcbf1f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#ga705e2527edcde11a56d7b0114fcbf1f2">R_ETHER_Read</a> (<a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const p_ctrl, void **const pp_buffer, uint32_t *const length_bytes)</td></tr>
<tr class="memdesc:ga705e2527edcde11a56d7b0114fcbf1f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive Ethernet frame. Receives data to the location specified by the pointer to the receive buffer, using non-zero-copy communication. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#a2e3f4ad694c500a0d1cb7ed3cb4a6a92">ether_api_t::read</a>.  <a href="#ga705e2527edcde11a56d7b0114fcbf1f2">More...</a><br /></td></tr>
<tr class="separator:ga705e2527edcde11a56d7b0114fcbf1f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3bc8e53a14aa52d4d2b9b247ddd7cce8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#ga3bc8e53a14aa52d4d2b9b247ddd7cce8">R_ETHER_BufferRelease</a> (<a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const p_ctrl)</td></tr>
<tr class="memdesc:ga3bc8e53a14aa52d4d2b9b247ddd7cce8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the receive buffer. Implements ether_api_t::BufferRelease.  <a href="#ga3bc8e53a14aa52d4d2b9b247ddd7cce8">More...</a><br /></td></tr>
<tr class="separator:ga3bc8e53a14aa52d4d2b9b247ddd7cce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad54ccf1420a5c32afe90762eebde112"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#gaad54ccf1420a5c32afe90762eebde112">R_ETHER_Write</a> (<a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const p_ctrl, void *const p_buffer, uint32_t const frame_length)</td></tr>
<tr class="memdesc:gaad54ccf1420a5c32afe90762eebde112"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit Ethernet frame. Transmits data from the location specified by the pointer to the transmit buffer, with the data size equal to the specified frame length, using non-zero-copy communication. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#a92e87f33f0a4e0ccb26464d697cdf233">ether_api_t::write</a>.  <a href="#gaad54ccf1420a5c32afe90762eebde112">More...</a><br /></td></tr>
<tr class="separator:gaad54ccf1420a5c32afe90762eebde112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab10af3abff76900b7895934685c43311"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#gab10af3abff76900b7895934685c43311">R_ETHER_LinkProcess</a> (<a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const p_ctrl)</td></tr>
<tr class="memdesc:gab10af3abff76900b7895934685c43311"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Link up processing, the Link down processing, and the magic packet detection processing are executed. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#a125ca4ee69c6c63e1db42708324c0fb3">ether_api_t::linkProcess</a>.  <a href="#gab10af3abff76900b7895934685c43311">More...</a><br /></td></tr>
<tr class="separator:gab10af3abff76900b7895934685c43311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga992be578c310d212389be65762d1b6ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#ga992be578c310d212389be65762d1b6ea">R_ETHER_WakeOnLANEnable</a> (<a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const p_ctrl)</td></tr>
<tr class="memdesc:ga992be578c310d212389be65762d1b6ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">The setting of ETHERC is changed from a usual sending and receiving mode to the magic packet detection mode. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#afabb87ef0be65717bb7675a4a004e3ad">ether_api_t::wakeOnLANEnable</a>.  <a href="#ga992be578c310d212389be65762d1b6ea">More...</a><br /></td></tr>
<tr class="separator:ga992be578c310d212389be65762d1b6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef9ae6460a191a602864a5b4da16cf45"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#gaef9ae6460a191a602864a5b4da16cf45">R_ETHER_VersionGet</a> (<a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#unionfsp__version__t">fsp_version_t</a> *const p_version)</td></tr>
<tr class="memdesc:gaef9ae6460a191a602864a5b4da16cf45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides API and code version in the user provided pointer. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#a2d7eb9db55c87bff39494408612fe766">ether_api_t::versionGet</a>.  <a href="#gaef9ae6460a191a602864a5b4da16cf45">More...</a><br /></td></tr>
<tr class="separator:gaef9ae6460a191a602864a5b4da16cf45"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Driver for the Ethernet peripheral on RA MCUs. This module implements the <a class="el" href="group___e_t_h_e_r___a_p_i.html">Ethernet Interface</a>. </p>
<h1><a class="anchor" id="r-ether-overview"></a>
Overview</h1>
<p>This module performs Ethernet frame transmission and reception using an Ethernet controller and an Ethernet DMA controller.</p>
<h2><a class="anchor" id="r-ether-features"></a>
Features</h2>
<p>The Ethernet module supports the following features:</p><ul>
<li>Transmit/receive processing(Zerocopy and Non-Zerocopy)</li>
<li>Callback function with returned event code</li>
<li>Magic packet detection mode support</li>
<li>Auto negotiation support</li>
<li>Flow control support</li>
<li>Multicast filtering support<a class="anchor" id="um_ether_skipping_multicast_frame_when_multicast_filter_enabled"></a></li>
<li>Broadcast filtering support<a class="anchor" id="um_ether_regurating_broadcast_packet_when_broadcast_filter_enable"></a></li>
<li>Promiscuous mode support<a class="anchor" id="um_ether_receiving_all_frame_when_promiscuous_mode_enabled"></a></li>
</ul>
<h2>Target Devices</h2>
<p>The Ethernet module supports the following devices.</p><ul>
<li>RA6M3</li>
<li>RA6M2</li>
</ul>
<h2>Ethernet Frame Format</h2>
<p>The Ethernet module supports the Ethernet II/IEEE 802.3 frame format.</p>
<h3>Frame Format for Data Transmission and Reception</h3>
<div class="image">
<object type="image/svg+xml" data="frame_format_image.svg">frame_format_image.svg</object>
<div class="caption">
Frame Format Image</div></div>
<p> The preamble and SFD signal the start of an Ethernet frame. The FCS contains the CRC of the Ethernet frame and is calculated on the transmitting side. When data is received the CRC value of the frame is calculated in hardware, and the Ethernet frame is discarded if the values do not match. When the hardware determines that the data is normal, the valid range of receive data is: (transmission destination address) + (transmission source address) + (length/type) + (data).</p>
<h3>PAUSE Frame Format</h3>
<div class="image">
<object type="image/svg+xml" data="pause_frame_format_image.svg">pause_frame_format_image.svg</object>
<div class="caption">
Pause Frame Format Image</div></div>
<p> The transmission destination address is specified as 01:80:C2:00:00:01 (a multicast address reserved for PAUSE frames). At the start of the payload the length/type is specified as 0x8808 and the operation code as 0x0001. The pause duration in the payload is specified by the value of the automatic PAUSE (AP) bits in the automatic PAUSE frame setting register (APR), or the manual PAUSE time setting (MP) bits in the manual PAUSE frame setting register (MPR).</p>
<h3>Magic Packet Frame Format</h3>
<div class="image">
<object type="image/svg+xml" data="magic_packet_frame_format_image.svg">magic_packet_frame_format_image.svg</object>
<div class="caption">
Magic Packet Frame Format Image</div></div>
<p> In a Magic Packet, the value FF:FF:FF:FF:FF:FF followed by the transmission destination address repeated 16 times is inserted somewhere in the Ethernet frame data.</p>
<h1><a class="anchor" id="r-ether-configuration"></a>
Configuration</h1>
<p><h2>Build Time Configurations for r_ether</h2>
The following build time configurations are defined in fsp_cfg/driver/r_ether_cfg.h:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Description </th></tr>
<tr>
<td>Parameter Checking</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Default (BSP)</li>
<li>
Enabled</li>
<li>
Disabled</li>
</ul>
</td><td>If selected code for parameter checking is included in the build. </td></tr>
<tr>
<td>The polarity of the link signal output by the PHY-LSI</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Fall -&gt; Rise</li>
<li>
Rise -&gt; Fall</li>
</ul>
</td><td>Specify the polarity of the link signal output by the PHY-LSI. When 0 is specified, link-up and link-down correspond respectively to the fall and rise of the LINKSTA signal. When 1 is specified, link-up and link-down correspond respectively to the rise and fall of the LINKSTA signal. </td></tr>
<tr>
<td>The link status is detected by LINKSTA signal</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Unused</li>
<li>
Used</li>
</ul>
</td><td>Use LINKSTA signal for detect link status changes 0 = unused (use PHY-LSI status register) 1 = use (use LINKSTA signal) </td></tr>
</table>
 <h2>Configurations for Ethernet Driver on r_ether</h2>
This module can be added to the Threads tab from New -&gt; Driver -&gt; Network -&gt; Ethernet Driver on r_ether:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Description </th></tr>
<tr>
<td>Name</td><td>Name must be a valid C symbol</td><td>Module name. </td></tr>
<tr>
<td>MAC address</td><td>Configurable String</td><td>MAC address of this channel  </td></tr>
<tr>
<td>Ether channel</td><td>0</td><td>Select the ether channel number. </td></tr>
<tr>
<td>Zero copy Mode</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Disable</li>
<li>
Enable</li>
</ul>
</td><td>Zerocopy enable or disable </td></tr>
<tr>
<td>Multi cast Mode</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Disable</li>
<li>
Enable</li>
</ul>
</td><td>Multicast enable or disable </td></tr>
<tr>
<td>Promiscuous Mode</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Disable</li>
<li>
Enable</li>
</ul>
</td><td>Multicast enable or disable </td></tr>
<tr>
<td>Flow control functionality</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Disable</li>
<li>
Enable</li>
</ul>
</td><td>Flow control functionally enable or disable </td></tr>
<tr>
<td>Broadcast filter</td><td>Value must be a non-negative integer </td><td>Limit of the number of broadcast frames received continuously </td></tr>
<tr>
<td>Number of TX buffer</td><td>Value must be an integer from 1 to 8</td><td>Number of transmitter buffer </td></tr>
<tr>
<td>Number of RX buffer</td><td>Value must be an integer from 1 to 8</td><td>Number of receive buffer </td></tr>
<tr>
<td>Buffer size</td><td>The value must be at least 1514 which is the maximum Ethernet frame size</td><td>Size of Ethernet buffer </td></tr>
<tr>
<td>Interrupt priority</td><td>MCU Specific Options</td><td>Select the EDMAC interrupt priority. </td></tr>
<tr>
<td>Callback provided when an ISR occurs</td><td>Name must be a valid C symbol</td><td>Callback provided when an ISR occurs </td></tr>
</table>
</p>
<p><a class="anchor" id="um_ether_configuration_for_connection_mode"></a><a class="anchor" id="um_ether_configuration_of_mac_address"></a></p>
<h2><a class="anchor" id="r-ether-interrupt-configuration"></a>
Interrupt Configuration</h2>
<p>The first <a class="el" href="group___e_t_h_e_r.html#gab2b878c7b67357c06e1f9231265819fd">R_ETHER_Open</a> function call sets EINT interrupts. The user could provide callback function which would be invoked when EINT interrupt handler has been completed. The callback arguments will contain information about a channel number, the ETHERC and EDMAC status, the event code, and a pointer to the user defined context.</p>
<h2><a class="anchor" id="r-ether-callback-configuration"></a>
Callback Configuration</h2>
<p>The user could provide callback function which would be invoked when either a magic packet or a link signal change is detected. When the callback function is called, a variable in which the channel number for which the detection occurred and a constant shown in Table 2.4 are stored is passed as an argument. If the value of this argument is to be used outside the callback function, it's value should be copied into, for example, a global variable.</p>
<h2><a class="anchor" id="r-ether-clock-configuration"></a>
Clock Configuration</h2>
<p>The ETHER clock is derived from the following peripheral clock on each device.</p>
<table class="doxtable">
<tr>
<th>MCU </th><th>Peripheral Clock  </th></tr>
<tr>
<td>RA6M2 </td><td>PCLKA </td></tr>
<tr>
<td>RA6M3 </td><td>PCLKA </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>1. When using ETHERC, the PCLKA frequency is in the range 12.5 MHz &lt;= PCLKA &lt;= 120 MHz. </dd>
<dd>
2. When using ETHERC, PCLKA = ICLK.</dd></dl>
<h2><a class="anchor" id="r-ether-pin-configuration"></a>
Pin Configuration</h2>
<p>To use the Ethernet module, input/output signals of the peripheral function have to be allocated to pins with the multi-function pin controller (MPC). Please perform the pin setting before calling the <a class="el" href="group___e_t_h_e_r.html#gab2b878c7b67357c06e1f9231265819fd">R_ETHER_Open</a> function.</p>
<h1><a class="anchor" id="r-ether-usage_notes"></a>
Usage Notes</h1>
<h2><a class="anchor" id="r-ether-limitations"></a>
Limitations</h2>
<dl class="section note"><dt>Note</dt><dd>Ethernet Dreiver has alignment constraints. </dd>
<dd>
1. Please follow the 16 byte alignment for the descriptor and 32 byte alignment for the transmit/receive buffer. </dd>
<dd>
2. Please pass a 32-byte aligned buffer as a parameter to the write function in zero copy mode.</dd></dl>
<h1><a class="anchor" id="r-ether-examples"></a>
Examples</h1>
<h2>ETHER Basic Example</h2>
<p>This is a basic example of minimal use of the ETHER in an application.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_MAXIMUM_ETHERNET_FRAME_SIZE (1514)</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_TRANSMIT_ETHERNET_FRAME_SIZE (60)</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_SOURCE_MAC_ADDRESS          0x74,0x90,0x50,0x00,0x79,0x01</span></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_DESTINATION_MAC_ADDRESS     0x74,0x90,0x50,0x00,0x79,0x02</span></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_SOURCE_MAC_ADDRESS          0x74,0x90,0x50,0x00,0x79,0x01</span></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_FRAME_TYPE                  0x00,0x2E</span></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_PAYLOAD                     0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, \</span></div><div class="line"><span class="preprocessor">                                                  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, \</span></div><div class="line"><span class="preprocessor">                                                  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, \</span></div><div class="line"><span class="preprocessor">                                                  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, \</span></div><div class="line"><span class="preprocessor"></span></div><div class="line"><span class="keywordtype">void</span> ether_basic_example (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> err = FSP_SUCCESS;</div><div class="line"></div><div class="line">    <span class="comment">/* Source MAC Address */</span></div><div class="line">    <span class="keyword">static</span> uint8_t mac_address_source[6] = {ETHER_EXAMPLE_SOURCE_MAC_ADDRESS};</div><div class="line"></div><div class="line">    <span class="keyword">static</span> uint8_t read_buffer[ETHER_EXAMPLE_MAXIMUM_ETHERNET_FRAME_SIZE] = {0};</div><div class="line">    uint32_t read_data_size = 0;</div><div class="line"></div><div class="line">    <span class="comment">/* Transmit data */</span></div><div class="line">    <span class="keyword">static</span> uint8_t send_data[ETHER_EXAMPLE_TRANSMIT_ETHERNET_FRAME_SIZE] =</div><div class="line">    {</div><div class="line">    ETHER_EXAMPLE_DESTINATION_MAC_ADDRESS, <span class="comment">/* Destination MAC address */</span></div><div class="line">    ETHER_EXAMPLE_SOURCE_MAC_ADDRESS,      <span class="comment">/* Source MAC address */</span></div><div class="line">    ETHER_EXAMPLE_FRAME_TYPE,              <span class="comment">/* Type field */</span></div><div class="line">    ETHER_EXAMPLE_PAYLOAD                  <span class="comment">/* Payload value (46byte) */</span></div><div class="line">    };</div><div class="line"></div><div class="line">    g_ether0_cfg.p_mac_address     = mac_address_source;</div><div class="line"></div><div class="line">    rmii_pinconfig();</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Open the ether instance with initial configuration. */</span></div><div class="line">    err = <a class="code" href="group___e_t_h_e_r.html#gab2b878c7b67357c06e1f9231265819fd">R_ETHER_Open</a>(&amp;g_ether0_ctrl, &amp;g_ether0_cfg);</div><div class="line">    handle_error(err);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordflow">do</span> {</div><div class="line"></div><div class="line">        <span class="comment">/* When the Ethernet link status read from the PHY-LSI Basic Status register is link-up,</span></div><div class="line"><span class="comment">         * Initializes the module and make auto negotiation. */</span></div><div class="line"></div><div class="line">        err = <a class="code" href="group___e_t_h_e_r.html#gab10af3abff76900b7895934685c43311">R_ETHER_LinkProcess</a>(&amp;g_ether0_ctrl);</div><div class="line"></div><div class="line">    } <span class="keywordflow">while</span> (FSP_SUCCESS != err);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    err = <a class="code" href="group___e_t_h_e_r.html#gaad54ccf1420a5c32afe90762eebde112">R_ETHER_Write</a>(&amp;g_ether0_ctrl, (<span class="keywordtype">void</span> *)send_data, <span class="keyword">sizeof</span>(send_data));</div><div class="line">    <span class="keywordflow">if</span> (FSP_SUCCESS == err)</div><div class="line">    {</div><div class="line">    <span class="comment">/* Transmission is non-blocking. */</span></div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    err = <a class="code" href="group___e_t_h_e_r.html#ga705e2527edcde11a56d7b0114fcbf1f2">R_ETHER_Read</a>(&amp;g_ether0_ctrl, (<span class="keywordtype">void</span> **) read_buffer, &amp;read_data_size);</div><div class="line">    <span class="keywordflow">if</span>(FSP_SUCCESS == err)</div><div class="line">    {</div><div class="line">    <span class="comment">/* Reading the receive data is completed. */</span></div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Disable transmission and receive function and close the ether instance. */</span></div><div class="line">    <a class="code" href="group___e_t_h_e_r.html#gafbd25f2b961e8e2a807444f04e08d158">R_ETHER_Close</a>(&amp;g_ether0_ctrl);</div><div class="line"></div><div class="line"></div><div class="line">}</div></div><!-- fragment --> <h2>ETHER Advanced Example</h2>
<p>The example demonstrates using send and receive function in zero copy mode.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_FLAG_ON       (1U)</span></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_FLAG_OFF      (0U)</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_ETHER_ISR_EE_FR_MASK  (1UL &lt;&lt; 18)</span></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_ETHER_ISR_EE_TC_MASK  (1UL &lt;&lt; 21)</span></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_ETHER_ISR_EC_MPD_MASK (1UL &lt;&lt; 1)</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ETHER_EXAMPLE_ALIGNMENT_32_BYTE     (32)</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">volatile</span> uint32_t g_example_receive_complete = 0;</div><div class="line"><span class="keyword">static</span> <span class="keyword">volatile</span> uint32_t g_example_transfer_complete = 0;</div><div class="line"><span class="keyword">static</span> <span class="keyword">volatile</span> uint32_t g_example_magic_packet_done = 0;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> ether_example_callback (<a class="code" href="group___e_t_h_e_r___a_p_i.html#structether__callback__args__t">ether_callback_args_t</a> * p_args){</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (p_args-&gt;<a class="code" href="group___e_t_h_e_r___a_p_i.html#aa28fdd797448d1ed0d56604ec87b349a">event</a>)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___e_t_h_e_r___a_p_i.html#ggad029483e98651bf40e3e3439ed6d1973a1d528f77a7fdfb14f6fe93179ac2b5ee">ETHER_EVENT_INTERRUPT</a>:</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (ETHER_EXAMPLE_ETHER_ISR_EC_MPD_MASK == (p_args-&gt;<a class="code" href="group___e_t_h_e_r___a_p_i.html#af3841da2d8c5298a41614fd264f429b3">status_ecsr</a> &amp; ETHER_EXAMPLE_ETHER_ISR_EC_MPD_MASK))</div><div class="line">            {</div><div class="line">                g_example_magic_packet_done = ETHER_EXAMPLE_FLAG_ON;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (ETHER_EXAMPLE_ETHER_ISR_EE_TC_MASK == (p_args-&gt;<a class="code" href="group___e_t_h_e_r___a_p_i.html#abf2b41c4e54e2e99bab4e00b131f8a7e">status_eesr</a> &amp; ETHER_EXAMPLE_ETHER_ISR_EE_TC_MASK))</div><div class="line">            {</div><div class="line">                g_example_transfer_complete = ETHER_EXAMPLE_FLAG_ON;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (ETHER_EXAMPLE_ETHER_ISR_EE_FR_MASK == (p_args-&gt;<a class="code" href="group___e_t_h_e_r___a_p_i.html#abf2b41c4e54e2e99bab4e00b131f8a7e">status_eesr</a> &amp; ETHER_EXAMPLE_ETHER_ISR_EE_FR_MASK))</div><div class="line">            {</div><div class="line">                g_example_receive_complete = ETHER_EXAMPLE_FLAG_ON;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">        {</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> ether_advanced_example (<span class="keywordtype">void</span>){</div><div class="line"></div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> err = FSP_SUCCESS;</div><div class="line"></div><div class="line">    <span class="comment">/* Source MAC Address */</span></div><div class="line">    <span class="keyword">static</span> uint8_t mac_address_source[6] = {ETHER_EXAMPLE_SOURCE_MAC_ADDRESS};</div><div class="line"></div><div class="line">    <span class="keyword">static</span> uint8_t * p_read_buffer;</div><div class="line">    uint32_t read_data_size = 0;</div><div class="line"></div><div class="line">    <span class="comment">/* The transmit data must follow 32-byte alignment</span></div><div class="line"><span class="comment">     * when use Ethernet driver as zero copy mode. */</span></div><div class="line">    BSP_ALIGN_VARIABLE(ETHER_EXAMPLE_ALIGNMENT_32_BYTE) <span class="keyword">static</span> uint8_t send_data[ETHER_EXAMPLE_TRANSMIT_ETHERNET_FRAME_SIZE] =</div><div class="line">    {</div><div class="line">    ETHER_EXAMPLE_DESTINATION_MAC_ADDRESS, <span class="comment">/* Destination MAC address */</span></div><div class="line">    ETHER_EXAMPLE_SOURCE_MAC_ADDRESS,      <span class="comment">/* Source MAC address */</span></div><div class="line">    ETHER_EXAMPLE_FRAME_TYPE,              <span class="comment">/* Type field */</span></div><div class="line">    ETHER_EXAMPLE_PAYLOAD                  <span class="comment">/* Payload value (46byte) */</span></div><div class="line">    };</div><div class="line"></div><div class="line">    g_ether0_cfg.p_mac_address = mac_address_source;</div><div class="line"></div><div class="line">    g_ether0_cfg.zerocopy      = <a class="code" href="group___e_t_h_e_r___a_p_i.html#ggad3c9ba84cbe05cc1ff9b37d25318dd07ae6b9b9b112795b5334d6198f088692ac">ETHER_ZEROCOPY_ENABLE</a>;</div><div class="line">    g_ether0_cfg.p_callback    = (void (*)(<a class="code" href="group___e_t_h_e_r___a_p_i.html#structether__callback__args__t">ether_callback_args_t</a> *)) ether_example_callback;</div><div class="line"></div><div class="line">    rmii_pinconfig();</div><div class="line"></div><div class="line">    <span class="comment">/* Open the ether instance with initial configuration. */</span></div><div class="line">    err = <a class="code" href="group___e_t_h_e_r.html#gab2b878c7b67357c06e1f9231265819fd">R_ETHER_Open</a>(&amp;g_ether0_ctrl, &amp;g_ether0_cfg);</div><div class="line">    handle_error(err);</div><div class="line"></div><div class="line">    <span class="keywordflow">do</span> {</div><div class="line"></div><div class="line">        <span class="comment">/* When the Ethernet link status read from the PHY-LSI Basic Status register is link-up,</span></div><div class="line"><span class="comment">         * Initializes the module and make auto negotiation. */</span></div><div class="line"></div><div class="line">        err = <a class="code" href="group___e_t_h_e_r.html#gab10af3abff76900b7895934685c43311">R_ETHER_LinkProcess</a>(&amp;g_ether0_ctrl);</div><div class="line"></div><div class="line">    } <span class="keywordflow">while</span> (FSP_SUCCESS != err);</div><div class="line"></div><div class="line"></div><div class="line">    err = <a class="code" href="group___e_t_h_e_r.html#gaad54ccf1420a5c32afe90762eebde112">R_ETHER_Write</a>(&amp;g_ether0_ctrl, (<span class="keywordtype">void</span> *)send_data, <span class="keyword">sizeof</span>(send_data));</div><div class="line">    <span class="keywordflow">if</span> (FSP_SUCCESS == err)</div><div class="line">    {</div><div class="line">    <span class="comment">/* Transmission is non-blocking. Wait for the transmission to complete</span></div><div class="line"><span class="comment">     * when use Ethernet driver as zero copy mode. */</span></div><div class="line">        <span class="keywordflow">while</span>(ETHER_EXAMPLE_FLAG_ON != g_example_transfer_complete){</div><div class="line">            ;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    err = <a class="code" href="group___e_t_h_e_r.html#ga705e2527edcde11a56d7b0114fcbf1f2">R_ETHER_Read</a>(&amp;g_ether0_ctrl, (<span class="keywordtype">void</span> **) &amp;p_read_buffer, &amp;read_data_size);</div><div class="line">    <span class="keywordflow">if</span>(FSP_SUCCESS == err)</div><div class="line">    {</div><div class="line">    <span class="comment">/* Reading the receive data is completed. */</span></div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Disable transmission and receive function and close the ether instance. */</span></div><div class="line">    <a class="code" href="group___e_t_h_e_r.html#gafbd25f2b961e8e2a807444f04e08d158">R_ETHER_Close</a>(&amp;g_ether0_ctrl);</div><div class="line"></div><div class="line"></div><div class="line">}</div><div class="line"></div></div><!-- fragment --><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structether__instance__ctrl__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#structether__instance__ctrl__t">ether_instance_ctrl_t</a></td></tr>
<tr class="separator:structether__instance__ctrl__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga84685e14baf908ba6180ecbfafc18621"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#ga84685e14baf908ba6180ecbfafc18621">ether_previous_link_status_t</a> </td></tr>
<tr class="separator:ga84685e14baf908ba6180ecbfafc18621"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab0df8da3261a6a2dc9b9b430c00c6ad2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#gab0df8da3261a6a2dc9b9b430c00c6ad2">ether_link_change_t</a> </td></tr>
<tr class="separator:gab0df8da3261a6a2dc9b9b430c00c6ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac38559e233d4678a9b24d2ee16aa9d7b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#gac38559e233d4678a9b24d2ee16aa9d7b">ether_magic_packet_t</a> </td></tr>
<tr class="separator:gac38559e233d4678a9b24d2ee16aa9d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a49b9f7718ca059e906c12de43c0784"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___e_t_h_e_r.html#ga9a49b9f7718ca059e906c12de43c0784">ether_link_establish_status_t</a> </td></tr>
<tr class="separator:ga9a49b9f7718ca059e906c12de43c0784"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structether__instance__ctrl__t" id="structether__instance__ctrl__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structether__instance__ctrl__t">&#9670;&nbsp;</a></span>ether_instance_ctrl_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct ether_instance_ctrl_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>ETHER control block. DO NOT INITIALIZE. Initialization occurs when <a class="el" href="group___e_t_h_e_r___a_p_i.html#ae75458ac2a31861195b73120676d670c">ether_api_t::open</a> is called. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a5a47551251fa2ce32c2eb47789bfc1ec"></a>uint32_t</td>
<td class="fieldname">
open</td>
<td class="fielddoc">
Used to determine if the channel is configured. </td></tr>
<tr><td class="fieldtype">
<a id="abe2e7e26edeea76c44da7a17cec958d0"></a><a class="el" href="group___e_t_h_e_r___a_p_i.html#structether__cfg__t">ether_cfg_t</a> const  *</td>
<td class="fieldname">
p_ether_cfg</td>
<td class="fielddoc">
Pointer to initial configurations. </td></tr>
<tr><td class="fieldtype">
<a id="a5f9f64bc5b34fd3a8c679511a3432b06"></a><a class="el" href="group___e_t_h_e_r___a_p_i.html#structether__instance__descriptor__t">ether_instance_descriptor_t</a> *</td>
<td class="fieldname">
p_rx_descriptor</td>
<td class="fielddoc">
Pointer to the currently referenced transmit descriptor. </td></tr>
<tr><td class="fieldtype">
<a id="a2a90ddc68dffa65649d6693d100c59b1"></a><a class="el" href="group___e_t_h_e_r___a_p_i.html#structether__instance__descriptor__t">ether_instance_descriptor_t</a> *</td>
<td class="fieldname">
p_tx_descriptor</td>
<td class="fielddoc">
Pointer to the currently referenced receive descriptor. </td></tr>
<tr><td class="fieldtype">
<a id="a88583eae336381d4fb07fb83449b0856"></a>void *</td>
<td class="fieldname">
p_reg_etherc</td>
<td class="fielddoc">
Base register of ethernet controller for this channel. </td></tr>
<tr><td class="fieldtype">
<a id="a8cb5a35a2882e21dd17808bc62ab7cf7"></a>void *</td>
<td class="fieldname">
p_reg_edmac</td>
<td class="fielddoc">
Base register of EDMA controller for this channel. </td></tr>
<tr><td class="fieldtype">
<a id="ad207a1be57e5eb9ceb79ff5344efb6a7"></a><a class="el" href="group___e_t_h_e_r.html#ga84685e14baf908ba6180ecbfafc18621">ether_previous_link_status_t</a></td>
<td class="fieldname">
previous_link_status</td>
<td class="fielddoc">
Previous link status. </td></tr>
<tr><td class="fieldtype">
<a id="a65bb4564fbf4e0a16fa2fe84762192db"></a><a class="el" href="group___e_t_h_e_r.html#gab0df8da3261a6a2dc9b9b430c00c6ad2">ether_link_change_t</a></td>
<td class="fieldname">
link_change</td>
<td class="fielddoc">
status of link change </td></tr>
<tr><td class="fieldtype">
<a id="a1f919131083d021455a2e75b0d1d2f4e"></a><a class="el" href="group___e_t_h_e_r.html#gac38559e233d4678a9b24d2ee16aa9d7b">ether_magic_packet_t</a></td>
<td class="fieldname">
magic_packet</td>
<td class="fielddoc">
status of magic packet detection </td></tr>
<tr><td class="fieldtype">
<a id="a72f0205de3ce7f074088034cbdbc6f06"></a><a class="el" href="group___e_t_h_e_r.html#ga9a49b9f7718ca059e906c12de43c0784">ether_link_establish_status_t</a></td>
<td class="fieldname">
link_establish_status</td>
<td class="fielddoc">
Current Link status. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga84685e14baf908ba6180ecbfafc18621"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga84685e14baf908ba6180ecbfafc18621">&#9670;&nbsp;</a></span>ether_previous_link_status_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___e_t_h_e_r.html#ga84685e14baf908ba6180ecbfafc18621">ether_previous_link_status_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga84685e14baf908ba6180ecbfafc18621a0cb808fc5ef37f4af6a44e9f0156c123"></a>ETHER_PREVIOUS_LINK_STATUS_DOWN&#160;</td><td class="fielddoc"><p>Previous link status is down. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga84685e14baf908ba6180ecbfafc18621afc172a815ac21e377ad33af9f15ca4be"></a>ETHER_PREVIOUS_LINK_STATUS_UP&#160;</td><td class="fielddoc"><p>Previous link status is up. </p>
</td></tr>
</table>

</div>
</div>
<a id="gab0df8da3261a6a2dc9b9b430c00c6ad2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab0df8da3261a6a2dc9b9b430c00c6ad2">&#9670;&nbsp;</a></span>ether_link_change_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___e_t_h_e_r.html#gab0df8da3261a6a2dc9b9b430c00c6ad2">ether_link_change_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggab0df8da3261a6a2dc9b9b430c00c6ad2aadfc4290b54066048b67e26e367907e3"></a>ETHER_LINK_CHANGE_NO_CHANGE&#160;</td><td class="fielddoc"><p>Link status is no change. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggab0df8da3261a6a2dc9b9b430c00c6ad2a705aae645a6a1aa81ab26d15197c1456"></a>ETHER_LINK_CHANGE_LINK_DOWN&#160;</td><td class="fielddoc"><p>Link status changes to down. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggab0df8da3261a6a2dc9b9b430c00c6ad2a6c325e2fb4268597e346f6a21dfc4d02"></a>ETHER_LINK_CHANGE_LINK_UP&#160;</td><td class="fielddoc"><p>Link status changes to up. </p>
</td></tr>
</table>

</div>
</div>
<a id="gac38559e233d4678a9b24d2ee16aa9d7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac38559e233d4678a9b24d2ee16aa9d7b">&#9670;&nbsp;</a></span>ether_magic_packet_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___e_t_h_e_r.html#gac38559e233d4678a9b24d2ee16aa9d7b">ether_magic_packet_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac38559e233d4678a9b24d2ee16aa9d7ba655f088c230f2c5495ef492408337e09"></a>ETHER_MAGIC_PACKET_NOT_DETECTED&#160;</td><td class="fielddoc"><p>Magic packet is not detected. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac38559e233d4678a9b24d2ee16aa9d7ba0e6a084b224d9f4cda97146dda0cb0f5"></a>ETHER_MAGIC_PACKET_DETECTED&#160;</td><td class="fielddoc"><p>Magic packet is detected. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga9a49b9f7718ca059e906c12de43c0784"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9a49b9f7718ca059e906c12de43c0784">&#9670;&nbsp;</a></span>ether_link_establish_status_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___e_t_h_e_r.html#ga9a49b9f7718ca059e906c12de43c0784">ether_link_establish_status_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga9a49b9f7718ca059e906c12de43c0784aa8c8ee515baf9098d043094378fdf0c5"></a>ETHER_LINK_ESTABLISH_STATUS_DOWN&#160;</td><td class="fielddoc"><p>Link establish status is down. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga9a49b9f7718ca059e906c12de43c0784a52c3f79c649e8bb24e98b66480b2870f"></a>ETHER_LINK_ESTABLISH_STATUS_UP&#160;</td><td class="fielddoc"><p>Link establish status is up. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab2b878c7b67357c06e1f9231265819fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab2b878c7b67357c06e1f9231265819fd">&#9670;&nbsp;</a></span>R_ETHER_Open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ETHER_Open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___e_t_h_e_r___a_p_i.html#structether__cfg__t">ether_cfg_t</a> const *const&#160;</td>
          <td class="paramname"><em>p_cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>After ETHERC, EDMAC and PHY-LSI are reset in software, an auto negotiation of PHY-LSI is begun. Afterwards, the link signal change interrupt is permitted. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#ae75458ac2a31861195b73120676d670c">ether_api_t::open</a>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Channel opened successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Pointer to ETHER control block or configuration structure is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_ALREADY_OPEN</td><td>Control block has already been opened or channel is being used by another instance. Call close() then open() to reconfigure. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_PHY_COMMUNICATION</td><td>Initialization of PHY-LSI failed. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_CHANNEL</td><td>Invalid channel number is given. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_POINTER</td><td>Pointer to Mac address is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_ARGUMENT</td><td>Irq number lower then 0. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_PHY_ERROR_LINK</td><td>Initialization of PHY-LSI failed. This error does not occur originally. This error is the PHY driver error and is used only within the Ether driver. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gafbd25f2b961e8e2a807444f04e08d158"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafbd25f2b961e8e2a807444f04e08d158">&#9670;&nbsp;</a></span>R_ETHER_Close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ETHER_Close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_ctrl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables interrupts. Removes power and releases hardware lock. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#a1c0bc3caef73e0a216c2fe2edc4fff4b">ether_api_t::close</a>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Channel successfully closed. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Pointer to ETHER control block is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>The control block has not been opened </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga705e2527edcde11a56d7b0114fcbf1f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga705e2527edcde11a56d7b0114fcbf1f2">&#9670;&nbsp;</a></span>R_ETHER_Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ETHER_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **const&#160;</td>
          <td class="paramname"><em>pp_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *const&#160;</td>
          <td class="paramname"><em>length_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive Ethernet frame. Receives data to the location specified by the pointer to the receive buffer, using non-zero-copy communication. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#a2e3f4ad694c500a0d1cb7ed3cb4a6a92">ether_api_t::read</a>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Processing completed successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Pointer to ETHER control block is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>The control block has not been opened. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_NO_DATA</td><td>There is no data in receive buffer. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_LINK</td><td>Auto-negotiation is not completed, and reception is not enabled. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_MAGIC_PACKTE_MODE</td><td>As a Magic Packet is being detected, transmission and reception is not enabled. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_FILTERING</td><td>Multicast Frame filter is enable, and Multicast Address Frame is received. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_POINTER</td><td>Value of the pointer is NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga3bc8e53a14aa52d4d2b9b247ddd7cce8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3bc8e53a14aa52d4d2b9b247ddd7cce8">&#9670;&nbsp;</a></span>R_ETHER_BufferRelease()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ETHER_BufferRelease </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_ctrl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release the receive buffer. Implements ether_api_t::BufferRelease. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Processing completed successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Pointer to ETHER control block is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>The control block has not been opened </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_LINK</td><td>Auto-negotiation is not completed, and reception is not enabled. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_MAGIC_PACKTE_MODE</td><td>As a Magic Packet is being detected, transmission and reception is not enabled. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaad54ccf1420a5c32afe90762eebde112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaad54ccf1420a5c32afe90762eebde112">&#9670;&nbsp;</a></span>R_ETHER_Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ETHER_Write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>p_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t const&#160;</td>
          <td class="paramname"><em>frame_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit Ethernet frame. Transmits data from the location specified by the pointer to the transmit buffer, with the data size equal to the specified frame length, using non-zero-copy communication. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#a92e87f33f0a4e0ccb26464d697cdf233">ether_api_t::write</a>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Processing completed successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Pointer to ETHER control block is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>The control block has not been opened. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_LINK</td><td>Auto-negotiation is not completed, and reception is not enabled. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_MAGIC_PACKTE_MODE</td><td>As a Magic Packet is being detected, transmission and reception is not enabled. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_TRANSMIT_BUFFER_FULL</td><td>Transmit buffer is not empty. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_POINTER</td><td>Value of the pointer is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_ARGUMENT</td><td>Value of the send frame size is out of range. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab10af3abff76900b7895934685c43311"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab10af3abff76900b7895934685c43311">&#9670;&nbsp;</a></span>R_ETHER_LinkProcess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ETHER_LinkProcess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_ctrl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Link up processing, the Link down processing, and the magic packet detection processing are executed. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#a125ca4ee69c6c63e1db42708324c0fb3">ether_api_t::linkProcess</a>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Link is up. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Pointer to ETHER control block is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>The control block has not been opened. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_LINK</td><td>Link is down. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_PHY_COMMUNICATION</td><td>When reopen this module, initialization of PHY-LSI failed. </td></tr>
    <tr><td class="paramname">FSP_ERR_ALREADY_OPEN</td><td>When reopen this module, Control block has already been opened or channel is being used by another instance. This error does not occur originally, and if it occurs, a serious system error has occurred. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_CHANNEL</td><td>When reopen this module, Invalid channel number is given. This error does not occur originally, and if it occurs, a serious system error has occurred. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_POINTER</td><td>When reopen this module, Pointer to Mac address is NULL. This error does not occur originally, and if it occurs, a serious system error has occurred. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_ARGUMENT</td><td>Irq number lower then 0. This error does not occur originally, and if it occurs, a serious system error has occurred. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_PHY_ERROR_LINK</td><td>Initialization of PHY-LSI failed. This error does not occur originally. This error is the PHY driver error and is used only within the Ether driver. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga992be578c310d212389be65762d1b6ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga992be578c310d212389be65762d1b6ea">&#9670;&nbsp;</a></span>R_ETHER_WakeOnLANEnable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ETHER_WakeOnLANEnable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_t_h_e_r___a_p_i.html#gad9e606976602503ffeb95f3e2c717e6f">ether_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_ctrl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The setting of ETHERC is changed from a usual sending and receiving mode to the magic packet detection mode. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#afabb87ef0be65717bb7675a4a004e3ad">ether_api_t::wakeOnLANEnable</a>. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Processing completed successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>Pointer to ETHER control block is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>The control block has not been opened. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_ERROR_LINK</td><td>Auto-negotiation is not completed, and reception is not enabled. </td></tr>
    <tr><td class="paramname">FSP_ERR_ETHER_PHY_ERROR_LINK</td><td>Initialization of PHY-LSI failed. This error does not occur originally. This error is the PHY driver error and is used only within the Ether driver. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaef9ae6460a191a602864a5b4da16cf45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaef9ae6460a191a602864a5b4da16cf45">&#9670;&nbsp;</a></span>R_ETHER_VersionGet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__INLINE <a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ETHER_VersionGet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#unionfsp__version__t">fsp_version_t</a> *const&#160;</td>
          <td class="paramname"><em>p_version</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provides API and code version in the user provided pointer. Implements <a class="el" href="group___e_t_h_e_r___a_p_i.html#a2d7eb9db55c87bff39494408612fe766">ether_api_t::versionGet</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_version</td><td>Version number set here</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Version information stored in provided p_version. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>p_version is NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
        <li class="footer">FSP v0.8.0 User's Manual Rev0.80 R11UM0137EU0080 Copyright  (2019) Renesas Electronics Corporation. All Rights Reserved.</li>
    <li class="footer">Generated by FSP v0.8.0
    </li>
  </ul>
</div>
</body>
</html>
