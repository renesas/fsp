<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>RA Flexible Software Package Documentation: NetX Duo WiFi Driver (rm_netxduo_wifi)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <script type="text/javascript" src="search/lunr.js"></script>
    <link href="search/lunrsearch.css" rel="stylesheet" type="text/css">
    <script src="search/lunr_index.js"></script>
    <script src="search/lunrclient.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_scaled.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RA Flexible Software Package Documentation
   &#160;<span id="projectnumber">Release v4.0.0</span>
   </div>
  </td>
   <td>        <br /><div id="MSearchBox" class="MSearchBoxInactive">
 
    <form id="lunrSearchForm" name="lunrSearchForm">
      <span class="left" >
          <img id="MSearchSelect" src="search/mag_sel.png"
               alt=""/>
         <input class="search-input" id="MSearchField" name="q" placeholder="Search" type="text"> 
      </span>
      <span class="right">
          &nbsp; 
      </span>
        <!--<input type="submit" value="Search">-->
    </form>
</div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___r_m___n_e_t_x_d_u_o___w_i_f_i.html','');});
</script>

<script src="search/mark.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() { 
    var options = {         // allows highlighting across element boundaries.
      "acrossElements": true
    };
    var bodyText = $("div.contents").text(); // try contents instead of body. 
    // If using body: Problem may be that text inside <script> tags is included in .text() - but not in cheerio?
    // If using div.contents - works 
    var fullURL = $(location).attr('href');
    var splitURL = fullURL.split("?");  // Get param string: content after "?" in URL
    if (splitURL.length > 1) {          // If any content after "?"
      var paramStr = splitURL[1];
      var params = paramStr.split("&"); // Split params on "&"
      for (i = 0; i < params.length; i++) {
        var paramPair = params[i].split("=");
        if (paramPair[0] == "pos") {     // If any param starts "pos", get the content after "="
          posStr = paramPair[1];
          var splitPos = posStr.split(",");
          var termArray = [];
        // termArray will have the search terms
            for (i=0; i < splitPos.length; i += 2) {
            start = splitPos[i];
            len = splitPos[i+1]; // Needs error detection! Vulnerable if non-even # of pos entries
            term = bodyText.substr(start,len);
            if (termArray.includes(term) == false) {     // List all unique terms
                termArray.push(bodyText.substr(start,len)); 
            }
          } 
    //      console.log(termArray);
          var context = document.querySelector("div.contents");
          var instance = new Mark(context);
          for(i=0;i<termArray.length; i+=1) {
            instance.mark(termArray[i],options);  // Use Mark.js to mark all terms in termArray
            }    
          var firstMark = document.querySelector("mark");
          firstMark.scrollIntoView(true);
          //      console.log($("mark").first().text()); // Trying to scroll to first Mark element. 
        }
            }
    }
  });
</script>

<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />

<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


<!-- Lunr search results -->
<div id="lunrResultBox" style="
        position: fixed;
        border: 1px solid black;
        background-color: WhiteSmoke;  
        padding: 10px;
        width: 500px;
        height: 500px;
        top: 30;
        right: 0;
        overflow: auto;
        display: none">
    <button onclick="closeLunrResults()" style="float: right;">X</button>
    <div class="resultCount" id="resultCount"></div>
    <div id="searchResults"></div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">NetX Duo WiFi Driver (rm_netxduo_wifi)<div class="ingroups"><a class="el" href="group___r_e_n_e_s_a_s___m_o_d_u_l_e_s.html">Modules</a> &raquo; <a class="el" href="group___r_e_n_e_s_a_s___n_e_t_w_o_r_k_i_n_g___m_o_d_u_l_e_s.html">Networking</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="rm-netxduo-wifi-overview"></a>
Overview</h1>
<p>This module provides a NetX Duo driver that is implemented using the rm_wifi_onchip_silex driver.</p>
<p>Please refer to the <a href="https://docs.microsoft.com/en-us/azure/rtos/netx-duo/overview-netx-duo">NetXDuo documentation</a> for further details.</p>
<h2><a class="anchor" id="rm-netxduo-wifi-features"></a>
Features</h2>
<ul>
<li>Packet Types Supported<ul>
<li>TCP/IPv4</li>
<li>UDP</li>
</ul>
</li>
<li>Configurable IP MTU</li>
</ul>
<h1><a class="anchor" id="rm-netxduo-wifi-configuration"></a>
Configuration</h1>
<p><a class="anchor" id="um_rm_netxduo_wifi_enable_disable"></a><a class="anchor" id="um_rm_netxduo_wifi_ip"></a><a class="anchor" id="um_rm_netxduo_wifi_arp"></a> <h2>Build Time Configurations for rm_netxduo_wifi</h2>
The following build time configurations are defined in fsp_cfg/middleware/rm_netxduo_wifi_cfg.h:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Default</th><th>Description </th></tr>
<tr>
<td>IP MTU (bytes)</td><td>Value must be in the range [576, 1500] bytes.</td><td>1500 </td><td>IP MTU </td></tr>
</table>
</p>
<h1><a class="anchor" id="rm-netxduo-wifi-usage_notes"></a>
Usage Notes</h1>
<h2>Connecting to a Wireless Network</h2>
<p>NetX Duo does not support connecting to a wireless network directly and instead the driver functions should be called directly to establish a connection.</p>
<ul>
<li>rm_wifi_onchip_silex_open() should be called to initialize the WiFi module driver.</li>
<li>rm_wifi_onchip_silex_scan() should be used to scan for access points.</li>
<li>rm_wifi_onchip_silex_connect() should be used before opening a NetX IP instance in order to connect it to a network.</li>
<li>rm_wifi_onchip_silex_network_info_get() should be used after an access point connection has been established to get DHCP acquired IP address, subnet mask, and gateway.</li>
</ul>
<h2>Unsupported NetX Duo Features</h2>
<p>These features are currently not supported due to lack of support in the rm_wifi_onchip_silex driver or in the WiFi module hardware/firmware:</p>
<ul>
<li>IPv6 functionality</li>
<li>TCP/UDP server mode</li>
<li>ARP is handled directly by the WiFi module</li>
<li>DHCP is always enabled on module by the rm_wifi_onchip_silex driver, thus the software DHCP stack is unsupported.</li>
<li>The source port will not be used when binding a TCP or UDP socket. Applications should set the source port to <code>NX_ANY_PORT</code>.</li>
</ul>
<h2>On Module Alternatives</h2>
<p>Instead of using NetX Duo Software Addons the following features can be performed directly on the WiFi module by calling the appropriate function instead if desired:</p>
<ul>
<li>DNS: The user can preform a DNS lookup by calling rm_wifi_onchip_silex_dns_query.</li>
<li>ICMP: The user can perform a ping by calling rm_wifi_onchip_silex_ping.</li>
<li>SNTP: The WiFi module has multiple public APIs for time related functions:<ul>
<li>RM_WIFI_ONCHIP_SILEX_EpochTimeGet</li>
<li>RM_WIFI_ONCHIP_SILEX_LocalTimeGet</li>
<li>RM_WIFI_ONCHIP_SILEX_SntpEnableSet</li>
<li>RM_WIFI_ONCHIP_SILEX_SntpServerIpAddressSet</li>
<li>RM_WIFI_ONCHIP_SILEX_SntpTimeZoneSet</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="rm-netxduo-wifi-examples"></a>
Examples</h1>
<h2>Basic Example</h2>
<p>This is a basic example of minimal use of the NetX Duo WiFi Driver in an application.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_IP_STACK_SIZE       (2048U)</span></div><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_ARP_CACHE_SIZE      (2048U)</span></div><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_PACKET_SIZE         (1568U)</span></div><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_PACKET_NUM          (100U)</span></div><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_PACKET_POOL_SIZE    ((sizeof(NX_PACKET) + NETXDUO_EXAMPLE_PACKET_SIZE) * \</span></div><div class="line"><span class="preprocessor">                                             NETXDUO_EXAMPLE_PACKET_NUM)</span></div><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_SSID                &quot;ssidName&quot;</span></div><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_PASSWORD            &quot;password&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> NX_IP                   g_ip0;</div><div class="line"><span class="keyword">static</span> NX_PACKET_POOL          g_packet_pool0;</div><div class="line"><span class="keyword">static</span> uint8_t                 g_ip0_stack_memory[NETXDUO_EXAMPLE_IP_STACK_SIZE] BSP_ALIGN_VARIABLE(4);</div><div class="line"><span class="keyword">static</span> uint8_t                 g_packet_pool0_pool_memory[NETXDUO_EXAMPLE_PACKET_POOL_SIZE] BSP_ALIGN_VARIABLE(4);</div><div class="line"><span class="keyword">extern</span> <a class="code" href="group___w_i_f_i___o_n_c_h_i_p___s_i_l_e_x.html#structwifi__onchip__silex__cfg__t">wifi_onchip_silex_cfg_t</a> g_wifi_onchip_silex_cfg;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> rm_netxduo_wifi_example ()</div><div class="line">{</div><div class="line">    UINT      status;</div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> err;</div><div class="line"></div><div class="line">    nx_system_initialize();</div><div class="line"></div><div class="line">    <span class="comment">/* Open WiFi module */</span></div><div class="line">    err = rm_wifi_onchip_silex_open(&amp;g_wifi_onchip_silex_cfg);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Connect to desired AP */</span></div><div class="line">    err = rm_wifi_onchip_silex_connect(NETXDUO_EXAMPLE_SSID, <a class="code" href="group___w_i_f_i___a_p_i.html#gga827dc938c214035b938c5ebe7d7b6816ac4775007ba0bfdb4e4ba754f219387df">eWiFiSecurityWPA2</a>, NETXDUO_EXAMPLE_PASSWORD);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Create a packet pool for the IP instance. */</span></div><div class="line">    status = nx_packet_pool_create(&amp;g_packet_pool0,</div><div class="line">                                   <span class="stringliteral">&quot;Packet Pool&quot;</span>,</div><div class="line">                                   NETXDUO_EXAMPLE_PACKET_SIZE,</div><div class="line">                                   &amp;g_packet_pool0_pool_memory[0],</div><div class="line">                                   NETXDUO_EXAMPLE_PACKET_POOL_SIZE);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Create an IP instance using the rm_netxduo_wifi driver and packet pool instance. */</span></div><div class="line">    status = nx_ip_create(&amp;g_ip0,</div><div class="line">                          <span class="stringliteral">&quot;IP Instance&quot;</span>,</div><div class="line">                          IP_ADDRESS(192, 168, 1, 2),</div><div class="line">                          IP_ADDRESS(255, 255, 255, 0),</div><div class="line">                          &amp;g_packet_pool0,</div><div class="line">                          rm_netxduo_wifi,</div><div class="line">                          &amp;g_ip0_stack_memory[0],</div><div class="line">                          <span class="keyword">sizeof</span>(g_ip0_stack_memory),</div><div class="line">                          0);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Enable all modules that are required by the application. */</span></div><div class="line">    status = nx_tcp_enable(&amp;g_ip0);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    status = nx_udp_enable(&amp;g_ip0);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line">}</div><div class="line"></div></div><!-- fragment --> <h2>TLS Example</h2>
<p>This is a basic example of connecting a TLS socket.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_CRYPTO_METADATA_BUFFER_SIZE          (18000U)</span></div><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_TLS_PACKET_REASSEMBLY_BUFFER_SIZE    (4000U)</span></div><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_PORT                                 (3005U)</span></div><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_SERVER_PORT                          (9050U)</span></div><div class="line"><span class="preprocessor">#define NETXDUO_EXAMPLE_IP                                   IP_ADDRESS(1, 2, 3, 5)</span></div><div class="line"></div><div class="line">NX_SECURE_TLS_CRYPTO       g_nx_crypto_tls_test_ciphers;</div><div class="line"><span class="keyword">static</span> UCHAR               g_tls_crypto_metadata[NETXDUO_EXAMPLE_CRYPTO_METADATA_BUFFER_SIZE];</div><div class="line"><span class="keyword">static</span> UCHAR               g_tls_packet_buffer[NETXDUO_EXAMPLE_TLS_PACKET_REASSEMBLY_BUFFER_SIZE];</div><div class="line"><span class="keyword">static</span> NX_SECURE_X509_CERT g_certificate;</div><div class="line"></div><div class="line"><span class="keyword">extern</span> <span class="keyword">const</span> UCHAR g_trusted_ca_data;  <span class="comment">// User trusted certificates</span></div><div class="line"><span class="keyword">extern</span> USHORT      g_trusted_ca_length;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> rm_netxduo_wifi_tls_example ()</div><div class="line">{</div><div class="line">    UINT                  status;</div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>             err;</div><div class="line">    NX_TCP_SOCKET       * p_socket;</div><div class="line">    NX_SECURE_TLS_SESSION tls_session;</div><div class="line"></div><div class="line">    nx_system_initialize();</div><div class="line"></div><div class="line">    <span class="comment">/* Initialize NetX Crypto */</span></div><div class="line">    status = nx_crypto_initialize();</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Open WiFi module */</span></div><div class="line">    err = rm_wifi_onchip_silex_open(&amp;g_wifi_onchip_silex_cfg);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Connect to desired AP */</span></div><div class="line">    err = rm_wifi_onchip_silex_connect(NETXDUO_EXAMPLE_SSID, <a class="code" href="group___w_i_f_i___a_p_i.html#gga827dc938c214035b938c5ebe7d7b6816ac4775007ba0bfdb4e4ba754f219387df">eWiFiSecurityWPA2</a>, NETXDUO_EXAMPLE_PASSWORD);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Create a packet pool for the IP instance. */</span></div><div class="line">    status = nx_packet_pool_create(&amp;g_packet_pool0,</div><div class="line">                                   <span class="stringliteral">&quot;Packet Pool&quot;</span>,</div><div class="line">                                   NETXDUO_EXAMPLE_PACKET_SIZE,</div><div class="line">                                   &amp;g_packet_pool0_pool_memory[0],</div><div class="line">                                   NETXDUO_EXAMPLE_PACKET_POOL_SIZE);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Create an IP instance using the rm_netxduo_wifi driver and packet pool instance. */</span></div><div class="line">    status = nx_ip_create(&amp;g_ip0,</div><div class="line">                          <span class="stringliteral">&quot;IP Instance&quot;</span>,</div><div class="line">                          IP_ADDRESS(192, 168, 1, 2),</div><div class="line">                          IP_ADDRESS(255, 255, 255, 0),</div><div class="line">                          &amp;g_packet_pool0,</div><div class="line">                          rm_netxduo_wifi,</div><div class="line">                          &amp;g_ip0_stack_memory[0],</div><div class="line">                          <span class="keyword">sizeof</span>(g_ip0_stack_memory),</div><div class="line">                          0);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Enable all modules that are required by the application. */</span></div><div class="line">    status = nx_tcp_enable(&amp;g_ip0);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Initialize the NetX Secure TLS system.  */</span></div><div class="line">    nx_secure_tls_initialize();</div><div class="line"></div><div class="line">    <span class="comment">/* Create a TCP socket to use for the TLS session.  */</span></div><div class="line">    status = nx_tcp_socket_create(&amp;g_ip0,</div><div class="line">                                  p_socket,</div><div class="line">                                  <span class="stringliteral">&quot;TLS Client Socket&quot;</span>,</div><div class="line">                                  NX_IP_NORMAL,</div><div class="line">                                  NX_FRAGMENT_OKAY,</div><div class="line">                                  NX_IP_TIME_TO_LIVE,</div><div class="line">                                  1024 * 4,</div><div class="line">                                  NX_NULL,</div><div class="line">                                  NX_NULL);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Create a TLS session for our socket. This sets up the TLS session object for</span></div><div class="line"><span class="comment">     *     later use */</span></div><div class="line">    status =</div><div class="line">        nx_secure_tls_session_create(&amp;tls_session,</div><div class="line">                                     &amp;g_nx_crypto_tls_test_ciphers,</div><div class="line">                                     g_tls_crypto_metadata,</div><div class="line">                                     NETXDUO_EXAMPLE_CRYPTO_METADATA_BUFFER_SIZE);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Set the packet reassembly buffer for this TLS session. */</span></div><div class="line">    status = nx_secure_tls_session_packet_buffer_set(&amp;tls_session,</div><div class="line">                                                     g_tls_packet_buffer,</div><div class="line">                                                     NETXDUO_EXAMPLE_TLS_PACKET_REASSEMBLY_BUFFER_SIZE);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Initialize an X.509 certificate with the CA root certificate data. */</span></div><div class="line">    status = nx_secure_x509_certificate_initialize(&amp;g_certificate,</div><div class="line">                                                   (UCHAR *) g_trusted_ca_data,</div><div class="line">                                                   g_trusted_ca_length,</div><div class="line">                                                   NX_NULL,</div><div class="line">                                                   0,</div><div class="line">                                                   NX_NULL,</div><div class="line">                                                   0,</div><div class="line">                                                   NX_SECURE_X509_KEY_TYPE_NONE);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Add the initialized certificate as a trusted root certificate. */</span></div><div class="line">    status = nx_secure_tls_trusted_certificate_add(&amp;tls_session, &amp;g_certificate);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Bind the socket to a port. */</span></div><div class="line">    status = nx_tcp_client_socket_bind(p_socket, NETXDUO_EXAMPLE_PORT, NX_WAIT_FOREVER);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Connect TCP socket */</span></div><div class="line">    status = nx_tcp_client_socket_connect(p_socket, NETXDUO_EXAMPLE_IP, NETXDUO_EXAMPLE_SERVER_PORT, NX_WAIT_FOREVER);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line"></div><div class="line">    <span class="comment">/* Start the TLS Session using the connected TCP socket. This function will</span></div><div class="line"><span class="comment">     * ascertain from the TCP socket state that this is a TLS Client session. */</span></div><div class="line">    status = nx_secure_tls_session_start(&amp;tls_session, p_socket, NX_WAIT_FOREVER);</div><div class="line">    assert(NX_SUCCESS == status);</div><div class="line">}</div><div class="line"></div></div><!-- fragment --> <h2>UDP Example</h2>
<p>This is a basic example of connecting a UDP socket.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define NETXDUO_TESTS_SOCKET_TIMEOUT    (3000)</span></div><div class="line"><span class="preprocessor">#define NETXDUO_TESTS_UDP_TX_PORT       (5000)</span></div><div class="line"><span class="preprocessor">#define NETXDUO_TESTS_SERVER_IP         (0xC0A80064)</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> rm_netxduo_wifi_udp_example (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    NX_UDP_SOCKET udp_client_socket;</div><div class="line"></div><div class="line">    <span class="comment">/* IP Address of the remote socket. */</span></div><div class="line">    NXD_ADDRESS g_ip_address = NETXDUO_TESTS_SERVER_IP;</div><div class="line"></div><div class="line">    <span class="comment">/* Create the socket.  */</span></div><div class="line">    nx_udp_socket_create(&amp;g_ip, &amp;udp_client_socket, <span class="stringliteral">&quot;Socket 0&quot;</span>, NX_IP_NORMAL, NX_FRAGMENT_OKAY, 0, 5);</div><div class="line"></div><div class="line">    <span class="comment">/* Bind to the UDP port. */</span></div><div class="line">    nx_udp_socket_bind(&amp;udp_client_socket, NETXDUO_TESTS_UDP_TX_PORT, TX_WAIT_FOREVER);</div><div class="line"></div><div class="line">    NX_PACKET * p_nx_packet = NX_NULL;</div><div class="line"></div><div class="line">    <span class="comment">/* Allocate a packet for message data */</span></div><div class="line">    nx_packet_allocate(&amp;g_packet_pool0, &amp;p_nx_packet, NX_UDP_PACKET, NETXDUO_TESTS_SOCKET_TIMEOUT)</div><div class="line"></div><div class="line">    <span class="comment">/* Append message data to packet */</span></div><div class="line">    nx_packet_data_append(&amp;p_nx_packet, <span class="stringliteral">&quot;Hello World&quot;</span>, 12, &amp;g_packet_pool0, NX_WAIT_FOREVER);</div><div class="line"></div><div class="line">    <span class="comment">/* Send UDP message to server */</span></div><div class="line">    nx_udp_socket_send(&amp;udp_client_socket, &amp;p_nx_packet, &amp;g_ip_address, NETXDUO_TESTS_UDP_TX_PORT);</div><div class="line"></div><div class="line">    NX_PACKET * p_nx_packet_recv;</div><div class="line"></div><div class="line">    <span class="comment">/* Receive any response from UDP server */</span></div><div class="line">    nx_udp_socket_receive(&amp;udp_client_socket, &amp;p_nx_packet_recv, NETXDUO_TESTS_SOCKET_TIMEOUT);</div><div class="line"></div><div class="line">    <span class="comment">/* Unbind and delete the udp socket. */</span></div><div class="line">    nx_udp_socket_unbind(&amp;udp_client_socket);</div><div class="line">    nx_udp_socket_delete(&amp;udp_client_socket);</div><div class="line">}</div><div class="line"></div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
        <li class="footer">FSP Release v4.0.0 User's Manual Copyright Â© (2022) Renesas Electronics Corporation. All Rights Reserved.</li>
  </ul>
</div>
</body>
</html>
