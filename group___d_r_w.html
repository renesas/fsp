<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>RA Flexible Software Package Documentation: D/AVE 2D Port Interface (r_drw)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_scaled.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RA Flexible Software Package Documentation
   &#160;<span id="projectnumber">Release v1.2.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___d_r_w.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">D/AVE 2D Port Interface (r_drw)<div class="ingroups"><a class="el" href="group___r_e_n_e_s_a_s___m_o_d_u_l_e_s.html">Modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>Driver for the DRW peripheral on RA MCUs. This module is a port of D/AVE 2D. </p>
<h1><a class="anchor" id="r-drw-overview"></a>
Overview</h1>
<dl class="section note"><dt>Note</dt><dd><b>The D/AVE 2D Port Interface (D1 layer) is a HAL layer for the D/AVE D2 layer API and does not provide any interfaces to the user. Consult the <a href="https://www.renesas.com/us/en/software/dave2d-driver-docs.html">TES Dave2D Driver Documentation</a> for further information on using the D2 API.</b></dd>
<dd>
For cross-platform compatibility purposes the D1 and D2 APIs are not bound by the FSP coding guidelines for function names and general module functionality.</dd></dl>
<p><a class="anchor" id="um_drw_allocate_memory"></a><a class="anchor" id="um_drw_allocate_video_memory"></a><a class="anchor" id="um_drw_check_device_capability"></a><a class="anchor" id="um_drw_close_device"></a><a class="anchor" id="um_drw_copy_from_video_memory"></a><a class="anchor" id="um_drw_copy_to_video_memory"></a><a class="anchor" id="um_drw_disable_interrupt"></a><a class="anchor" id="um_drw_enable_interrupt"></a><a class="anchor" id="um_drw_flush_cache"></a><a class="anchor" id="um_drw_flush_cache_block"></a><a class="anchor" id="um_drw_free_memory"></a><a class="anchor" id="um_drw_free_video_memory"></a><a class="anchor" id="um_drw_get_memory_size"></a><a class="anchor" id="um_drw_get_register"></a><a class="anchor" id="um_drw_isr"></a><a class="anchor" id="um_drw_map_from_video_memory"></a><a class="anchor" id="um_drw_map_to_video_memory"></a><a class="anchor" id="um_drw_map_video_memory"></a><a class="anchor" id="um_drw_no_support_for_non_d1_dave2d"></a><a class="anchor" id="um_drw_open_device"></a><a class="anchor" id="um_drw_query_irq"></a><a class="anchor" id="um_drw_query_memory_architecture"></a><a class="anchor" id="um_drw_query_video_memory"></a><a class="anchor" id="um_drw_resume_a_thread"></a><a class="anchor" id="um_drw_return_d1_device_handle"></a><a class="anchor" id="um_drw_set_register"></a><a class="anchor" id="um_drw_support_d1_dave2d"></a><a class="anchor" id="um_drw_suspend_a_thread"></a><a class="anchor" id="um_drw_unmap_video_memory"></a><a class="anchor" id="um_drw_d2_layer"></a> </p>
<h1><a class="anchor" id="r-drw-configuration"></a>
Configuration</h1>
<p><h2>Build Time Configurations for r_drw</h2>
The following build time configurations are defined in fsp_cfg/r_drw_cfg.h:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Default</th><th>Description </th></tr>
<tr>
<td>Allow Indirect Mode</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Enabled</li>
<li>
Disabled</li>
</ul>
</td><td>Enabled </td><td>Enable indirect mode to allow no-copy mode for d2_adddlist (see the TES Dave2D Driver Documentation for details). </td></tr>
<tr>
<td>Memory Allocation</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Default</li>
<li>
Custom</li>
</ul>
</td><td>Default </td><td>Set Memory Allocation to Default to use built-in dynamic memory allocation for the D2 heap. This will use an RTOS heap if configured; otherwise, standard C malloc and free will be used.<br />
Set to Custom to define your own allocation scheme for the D2 heap. In this case, the developer will need to define the following functions:<br />
<br />
 void * d1_malloc(size_t size)<br />
 void d1_free(void * ptr) </td></tr>
</table>
 <h2>Configurations for Driver &gt; Graphics &gt; D/AVE 2D Port Interface on r_drw</h2>
This module can be added to the Stacks tab via New Stack &gt; Driver &gt; Graphics &gt; D/AVE 2D Port Interface on r_drw:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Default</th><th>Description </th></tr>
<tr>
<td>D2 Device Handle Name</td><td>Name must be a valid C symbol</td><td>d2_handle0 </td><td>Set the name for the d2_device handle used when calling D2 layer functions. </td></tr>
<tr>
<td>DRW Interrupt Priority</td><td>MCU Specific Options</td><td></td><td>Select the DRW_INT (display list completion) interrupt priority. </td></tr>
</table>
</p>
<h2><a class="anchor" id="r-drw-heap"></a>
Heap Size</h2>
<p>The D1 port layer allows the D2 driver to allocate memory as needed. There are three ways the driver can accomplish this:</p>
<ol type="1">
<li>Allocate memory using the main heap</li>
<li>Allocate memory using a heap provided by an RTOS</li>
<li>Allocate memory via user-provided functions</li>
</ol>
<p>When the "Memory Allocation" configuration option is set to "Default" the driver will use an RTOS implementation if available and the main heap otherwise. Setting the option to "Custom" allows the user to define their own scheme using the following prototypes:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> * d1_malloc(<span class="keywordtype">size_t</span> size);</div><div class="line"><span class="keywordtype">void</span> d1_free(<span class="keywordtype">void</span> * ptr);</div></div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>If there is no RTOS-based allocation scheme the main heap will be used. Be sure that it is enabled by setting the "Heap size (bytes)" property under RA Common on the <b>BSP</b> tab of the RA Configuration editor.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>It is recommended to add 32KB of additional heap space for the D2 driver until the actual usage can be determined in your application.</dd></dl>
<h2><a class="anchor" id="r-drw-interrupt"></a>
Interrupt</h2>
<p>The D1 port includes one interrupt to handle various events like display list completion or bus error. This interrupt is managed internally by the D2 driver and no callback function is available.</p>
<h1><a class="anchor" id="r-drw-usage_notes"></a>
Usage Notes</h1>
<h2><a class="anchor" id="r-drw-limitations"></a>
Limitations</h2>
<p>Developers should be aware of the following limitations when using the DRW engine:</p>
<ul>
<li>The DRW module supports two additional interrupt types - bus error and render complete. These interrupts are not needed for D2 layer operation and thus are not supported.</li>
<li>If the DRW module is stopped during rendering the render will continue once the module is started again. If this behavior is undesirable in your application it is recommended to call <code>d2_flushframe</code> before stopping the peripheral.</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
        <li class="footer">FSP Release v1.2.0 User's Manual Copyright Â© (2020) Renesas Electronics Corporation. All Rights Reserved.</li>
  </ul>
</div>
</body>
</html>
