<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>RA Flexible Software Package Documentation: Operational Amplifier (r_opamp)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <script type="text/javascript" src="search/lunr.js"></script>
    <link href="search/lunrsearch.css" rel="stylesheet" type="text/css">
    <script src="search/lunr_index.js"></script>
    <script src="search/lunrclient.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_scaled.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RA Flexible Software Package Documentation
   &#160;<span id="projectnumber">Release v3.5.0</span>
   </div>
  </td>
   <td>        <br /><div id="MSearchBox" class="MSearchBoxInactive">
 
    <form id="lunrSearchForm" name="lunrSearchForm">
      <span class="left" >
          <img id="MSearchSelect" src="search/mag_sel.png"
               alt=""/>
         <input class="search-input" id="MSearchField" name="q" placeholder="Search" type="text"> 
      </span>
      <span class="right">
          &nbsp; 
      </span>
        <!--<input type="submit" value="Search">-->
    </form>
</div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___o_p_a_m_p.html','');});
</script>

<script src="search/mark.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() { 
    var options = {         // allows highlighting across element boundaries.
      "acrossElements": true
    };
    var bodyText = $("div.contents").text(); // try contents instead of body. 
    // If using body: Problem may be that text inside <script> tags is included in .text() - but not in cheerio?
    // If using div.contents - works 
    var fullURL = $(location).attr('href');
    var splitURL = fullURL.split("?");  // Get param string: content after "?" in URL
    if (splitURL.length > 1) {          // If any content after "?"
      var paramStr = splitURL[1];
      var params = paramStr.split("&"); // Split params on "&"
      for (i = 0; i < params.length; i++) {
        var paramPair = params[i].split("=");
        if (paramPair[0] == "pos") {     // If any param starts "pos", get the content after "="
          posStr = paramPair[1];
          var splitPos = posStr.split(",");
          var termArray = [];
        // termArray will have the search terms
            for (i=0; i < splitPos.length; i += 2) {
            start = splitPos[i];
            len = splitPos[i+1]; // Needs error detection! Vulnerable if non-even # of pos entries
            term = bodyText.substr(start,len);
            if (termArray.includes(term) == false) {     // List all unique terms
                termArray.push(bodyText.substr(start,len)); 
            }
          } 
    //      console.log(termArray);
          var context = document.querySelector("div.contents");
          var instance = new Mark(context);
          for(i=0;i<termArray.length; i+=1) {
            instance.mark(termArray[i],options);  // Use Mark.js to mark all terms in termArray
            }    
          var firstMark = document.querySelector("mark");
          firstMark.scrollIntoView(true);
          //      console.log($("mark").first().text()); // Trying to scroll to first Mark element. 
        }
            }
    }
  });
</script>

<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />

<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


<!-- Lunr search results -->
<div id="lunrResultBox" style="
        position: fixed;
        border: 1px solid black;
        background-color: WhiteSmoke;  
        padding: 10px;
        width: 500px;
        height: 500px;
        top: 30;
        right: 0;
        overflow: auto;
        display: none">
    <button onclick="closeLunrResults()" style="float: right;">X</button>
    <div class="resultCount" id="resultCount"></div>
    <div id="searchResults"></div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Operational Amplifier (r_opamp)<div class="ingroups"><a class="el" href="group___r_e_n_e_s_a_s___m_o_d_u_l_e_s.html">Modules</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaeeb57e46c30f78afb0d6d6b486b87dde"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#gaeeb57e46c30f78afb0d6d6b486b87dde">R_OPAMP_Open</a> (<a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const p_api_ctrl, <a class="el" href="group___o_p_a_m_p___a_p_i.html#structopamp__cfg__t">opamp_cfg_t</a> const *const p_cfg)</td></tr>
<tr class="separator:gaeeb57e46c30f78afb0d6d6b486b87dde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9525d8b0ad8ef12686c89b33d1f9184"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#gae9525d8b0ad8ef12686c89b33d1f9184">R_OPAMP_InfoGet</a> (<a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const p_api_ctrl, <a class="el" href="group___o_p_a_m_p___a_p_i.html#structopamp__info__t">opamp_info_t</a> *const p_info)</td></tr>
<tr class="separator:gae9525d8b0ad8ef12686c89b33d1f9184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga53bed0c5b31bbad8092dec1903be5ee4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#ga53bed0c5b31bbad8092dec1903be5ee4">R_OPAMP_Start</a> (<a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const p_api_ctrl, uint32_t const channel_mask)</td></tr>
<tr class="separator:ga53bed0c5b31bbad8092dec1903be5ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab449713d7790a4e73317211178166c2a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#gab449713d7790a4e73317211178166c2a">R_OPAMP_Stop</a> (<a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const p_api_ctrl, uint32_t const channel_mask)</td></tr>
<tr class="separator:gab449713d7790a4e73317211178166c2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga91a580e6f9e7117b2be8c9f07596d373"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#ga91a580e6f9e7117b2be8c9f07596d373">R_OPAMP_StatusGet</a> (<a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const p_api_ctrl, <a class="el" href="group___o_p_a_m_p___a_p_i.html#structopamp__status__t">opamp_status_t</a> *const p_status)</td></tr>
<tr class="separator:ga91a580e6f9e7117b2be8c9f07596d373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfcb03e4ea60b3408e3b88e76f1388ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#gacfcb03e4ea60b3408e3b88e76f1388ee">R_OPAMP_Trim</a> (<a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const p_api_ctrl, <a class="el" href="group___o_p_a_m_p___a_p_i.html#gaaaf9fc8a2d64abefdf3f6f0dd8b0e42b">opamp_trim_cmd_t</a> const cmd, <a class="el" href="group___o_p_a_m_p___a_p_i.html#structopamp__trim__args__t">opamp_trim_args_t</a> const *const p_args)</td></tr>
<tr class="separator:gacfcb03e4ea60b3408e3b88e76f1388ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5590bdd0379906ac3c6af341ed41b1f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#ga5590bdd0379906ac3c6af341ed41b1f1">R_OPAMP_Close</a> (<a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const p_api_ctrl)</td></tr>
<tr class="separator:ga5590bdd0379906ac3c6af341ed41b1f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Driver for the OPAMP peripheral on RA MCUs. This module implements the <a class="el" href="group___o_p_a_m_p___a_p_i.html">OPAMP Interface</a>. </p>
<h1><a class="anchor" id="r-opamp-overview"></a>
Overview</h1>
<p>The OPAMP HAL module provides a high level API for signal amplification applications and supports the OPAMP peripheral available on RA MCUs.</p>
<h2><a class="anchor" id="r-opamp-features"></a>
Features</h2>
<ul>
<li>Low power or high-speed mode</li>
<li>Start by software or AGT compare match</li>
<li>Stop by software or ADC conversion end (stop by ADC conversion end only supported on op-amp channels configured to start by AGT compare match)</li>
<li>Trimming available on some MCUs (see hardware manual)</li>
</ul>
<h1><a class="anchor" id="r-opamp-configuration"></a>
Configuration</h1>
<p><a class="anchor" id="um_opamp_power_mode"></a><a class="anchor" id="um_opamp_event_triggers"></a> <h2>Build Time Configurations for r_opamp</h2>
The following build time configurations are defined in fsp_cfg/r_opamp_cfg.h:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Default</th><th>Description </th></tr>
<tr>
<td>Parameter Checking</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Default (BSP)</li>
<li>
Enabled</li>
<li>
Disabled</li>
</ul>
</td><td>Default (BSP) </td><td>If selected code for parameter checking is included in the build. </td></tr>
</table>
 <h2>Configurations for Analog &gt; Operational Amplifier (r_opamp)</h2>
This module can be added to the Stacks tab via New Stack &gt; Analog &gt; Operational Amplifier (r_opamp).<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Default</th><th>Description </th></tr>
<tr>
<td>Name</td><td>Name must be a valid C symbol</td><td>g_opamp0 </td><td>Module name. </td></tr>
<tr>
<td>AGT Start Trigger Configuration (N/A unless AGT Start Trigger is Selected for the Channel)</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
AGT1 Compare Match Starts OPAMPs 0 and 2 if configured for AGT Start, AGT0 Compare Match Starts OPAMPs 1 and 3 if configured for AGT Start</li>
<li>
AGT1 Compare Match Starts OPAMPs 0 and 1 if configured for AGT Start, AGT0 Compare Match Starts OPAMPs 2 and 3 if configured for AGT Start</li>
<li>
AGT1 Compare Match Starts all OPAMPs configured for AGT Start</li>
</ul>
</td><td>AGT1 Compare Match Starts all OPAMPs configured for AGT Start </td><td>Configure which AGT channel event triggers which op-amp channel. The AGT compare match event only starts the op-amp channel if the AGT Start trigger is selected in the Trigger configuration for the channel. </td></tr>
<tr>
<td>Power Mode</td><td>MCU Specific Options</td><td></td><td>Configure the op-amp based on power or speed requirements. This setting affects the minimum required stabilization time. Middle speed is not available for all MCUs. </td></tr>
<tr>
<td>Trigger Channel 0</td><td>MCU Specific Options</td><td></td><td>Select the event triggers to start or stop op-amp channel 0. If the event trigger is selected for start, the start() API enables the event trigger for this channel. If the event trigger is selected for stop, the stop() API disables the event trigger for this channel. </td></tr>
<tr>
<td>Trigger Channel 1</td><td>MCU Specific Options</td><td></td><td>Select the event triggers to start or stop op-amp channel 1. If the event trigger is selected for start, the start() API enables the event trigger for this channel. If the event trigger is selected for stop, the stop() API disables the event trigger for this channel. </td></tr>
<tr>
<td>Trigger Channel 2</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Software Start Software Stop</li>
<li>
AGT Start Software Stop</li>
<li>
AGT Start ADC Stop</li>
</ul>
</td><td>Software Start Software Stop </td><td>Select the event triggers to start or stop op-amp channel 2. If the event trigger is selected for start, the start() API enables the event trigger for this channel. If the event trigger is selected for stop, the stop() API disables the event trigger for this channel. </td></tr>
<tr>
<td>Trigger Channel 3</td><td>MCU Specific Options</td><td></td><td>Select the event triggers to start or stop op-amp channel 3. If the event trigger is selected for start, the start() API enables the event trigger for this channel. If the event trigger is selected for stop, the stop() API disables the event trigger for this channel. </td></tr>
<tr>
<td>OPAMP AMP0OS</td><td>MCU Specific Options</td><td></td><td>Select output to connect to AMP0O pin </td></tr>
<tr>
<td>OPAMP AMP0PS</td><td>MCU Specific Options</td><td></td><td>Select input to connect to AMP0+ pin </td></tr>
<tr>
<td>OPAMP AMP0MS</td><td>MCU Specific Options</td><td></td><td>Select input to connect to AMP0- pin </td></tr>
<tr>
<td>OPAMP AMP1PS</td><td>MCU Specific Options</td><td></td><td>Select input to connect to AMP1+ pin </td></tr>
<tr>
<td>OPAMP AMP1MS</td><td>MCU Specific Options</td><td></td><td>Select input to connect to AMP1- pin </td></tr>
<tr>
<td>OPAMP AMP2PS</td><td>MCU Specific Options</td><td></td><td>Select input to connect to AMP2+ pin </td></tr>
<tr>
<td>OPAMP AMP2MS</td><td>MCU Specific Options</td><td></td><td>Select input to connect to AMP2- pin </td></tr>
</table>
</p>
<h2><a class="anchor" id="r-opamp-clock-configuration"></a>
Clock Configuration</h2>
<p>The OPAMP runs on PCLKB.</p>
<h2><a class="anchor" id="r-opamp-pin-configuration"></a>
Pin Configuration</h2>
<p>To use the OPAMP HAL module, the port pins for the channels receiving the analog input must be set as inputs on the <b>Pins</b> tab of the RA Configuration editor.</p>
<p>Refer to the most recent FSP Release Notes for any additional operational limitations for this module.</p>
<h1><a class="anchor" id="r-opamp-usage_notes"></a>
Usage Notes</h1>
<h2>Trimming the OPAMP</h2>
<ul>
<li>On MCUs that support trimming, the op-amp trim register is set to the factory default after the Open API is called.</li>
<li>This function allows the application to trim the operational amplifier to a user setting, which overwrites the factory default trim values.</li>
<li>Supported on selected MCUs. See hardware manual for details.</li>
<li>Not supported if configured for low power mode (OPAMP_MODE_LOW_POWER).</li>
<li>This function is not reentrant. Only one side of one op-amp can be trimmed at a time. Complete the procedure for one side of one channel before calling the trim API with the command OPAMP_TRIM_CMD_START again.<ul>
<li>The trim procedure works as follows:</li>
<li>Call trim() for the Pch (+) side input with command OPAMP_TRIM_CMD_START.</li>
<li>Connect a fixed voltage to the Pch (+) input.</li>
<li>Connect the Nch (-) input to the op-amp output to create a voltage follower.</li>
<li>Ensure the op-amp is operating and stabilized.</li>
<li>Call trim() for the Pch (+) side input with command OPAMP_TRIM_CMD_START.</li>
<li>Measure the fixed voltage connected to the Pch (+) input using the SAR ADC and save the value (referred to as A later in this procedure).</li>
<li>Iterate over the following loop 5 times:<ul>
<li>Call trim() for the Pch (+) side input with command OPAMP_TRIM_CMD_NEXT_STEP.</li>
<li>Measure the op-amp output using the SAR ADC (referred to as B in the next step).</li>
<li>If A &lt;= B, call trim() for the Pch (+) side input with command OPAMP_TRIM_CMD_CLEAR_BIT.</li>
</ul>
</li>
<li>Call trim() for the Nch (-) side input with command OPAMP_TRIM_CMD_START.</li>
<li>Measure the fixed voltage connected to the Pch (+) input using the SAR ADC and save the value (referred to as A later in this procedure).</li>
<li>Iterate over the following loop 5 times:<ul>
<li>Call trim() for the Nch (-) side input with command OPAMP_TRIM_CMD_NEXT_STEP.</li>
<li>Measure the op-amp output using the SAR ADC (referred to as B in the next step).</li>
<li>If A &lt;= B, call trim() for the Nch (-) side input with command OPAMP_TRIM_CMD_CLEAR_BIT.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="r-opamp-examples"></a>
Examples</h2>
<h2>Basic Example</h2>
<p>This is a basic example of minimal use of the R_OPAMP in an application. The example demonstrates configuring OPAMP channel 0 for high speed mode, starting the OPAMP and reading the status of the OPAMP channel running. It also verifies that the stabilization wait time is the expected time for selected power mode</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#define OPAMP_EXAMPLE_CHANNEL    (0U)</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> basic_example (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> err;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Initialize the OPAMP module. */</span></div><div class="line">    err = <a class="code" href="group___o_p_a_m_p.html#gaeeb57e46c30f78afb0d6d6b486b87dde">R_OPAMP_Open</a>(&amp;g_opamp_ctrl, &amp;g_opamp_cfg);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Handle any errors. This function should be defined by the user. */</span></div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Start the OPAMP module. */</span></div><div class="line">    err = <a class="code" href="group___o_p_a_m_p.html#ga53bed0c5b31bbad8092dec1903be5ee4">R_OPAMP_Start</a>(&amp;g_opamp_ctrl, 1 &lt;&lt; OPAMP_EXAMPLE_CHANNEL);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Look up the required stabilization wait time. */</span></div><div class="line">    <a class="code" href="group___o_p_a_m_p___a_p_i.html#structopamp__info__t">opamp_info_t</a> info;</div><div class="line">    err = <a class="code" href="group___o_p_a_m_p.html#gae9525d8b0ad8ef12686c89b33d1f9184">R_OPAMP_InfoGet</a>(&amp;g_opamp_ctrl, &amp;info);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Wait for the OPAMP to stabilize. */</span></div><div class="line">    <a class="code" href="group___b_s_p___m_c_u.html#gaf3219448adfd1531cf69f68697ab184b">R_BSP_SoftwareDelay</a>(info.<a class="code" href="group___o_p_a_m_p___a_p_i.html#aa3b8654dc37cbf757ed525665c859bfa">min_stabilization_wait_us</a>, <a class="code" href="group___b_s_p___m_c_u.html#ggafd98e2a6f080d6a52a3ef72e3d731b2baa0312618f2508347a9a815b5887c12ae">BSP_DELAY_UNITS_MICROSECONDS</a>);</div><div class="line"></div><div class="line">}</div><div class="line"></div></div><!-- fragment --> <h2>Trim Example</h2>
<p>This example demonstrates the typical trimming procedure for opamp channel 0 using <a class="el" href="group___o_p_a_m_p.html#gacfcb03e4ea60b3408e3b88e76f1388ee">R_OPAMP_Trim()</a> API.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#ifndef OPAMP_EXAMPLE_CHANNEL</span></div><div class="line"><span class="preprocessor"> #define OPAMP_EXAMPLE_CHANNEL        (0U)</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="preprocessor">#ifndef OPAMP_EXAMPLE_ADC_CHANNEL</span></div><div class="line"><span class="preprocessor"> #define OPAMP_EXAMPLE_ADC_CHANNEL    (ADC_CHANNEL_2)</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="preprocessor">#define ADC_SCAN_END_DELAY            (100U)</span></div><div class="line"><span class="preprocessor">#define OPAMP_TRIM_LOOP_COUNT         (5)</span></div><div class="line"><span class="preprocessor">#define ADC_SCAN_END_MAX_TIMEOUT      (0xFFFF)</span></div><div class="line">uint32_t          g_callback_event_counter = 0;</div><div class="line"><a class="code" href="group___o_p_a_m_p___a_p_i.html#structopamp__trim__args__t">opamp_trim_args_t</a> trim_args_ch             =</div><div class="line">{</div><div class="line">    .<a class="code" href="group___o_p_a_m_p___a_p_i.html#ac09a521f37ca8251ecac8fa283a32e5d">channel</a> = OPAMP_EXAMPLE_CHANNEL,</div><div class="line">    .input   = <a class="code" href="group___o_p_a_m_p___a_p_i.html#gga225f7a2a63ee3dc11ce9853ada741b54ac4c864c7f705861e1cc230cf69fb2c89">OPAMP_TRIM_INPUT_PCH</a></div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">/* This callback is called when ADC Scan Complete event is generated. */</span></div><div class="line"><span class="keywordtype">void</span> adc_callback (<a class="code" href="group___a_d_c___a_p_i.html#structadc__callback__args__t">adc_callback_args_t</a> * p_args)</div><div class="line">{</div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gaf0afcbc9a110ac9366a811d96ee06029">FSP_PARAMETER_NOT_USED</a>(p_args);</div><div class="line"></div><div class="line">    g_callback_event_counter++;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> trimming_example (<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> err;</div><div class="line"></div><div class="line">    <span class="comment">/* On RA2A1, configure negative feedback and put DAC12 signal on AMP0+ Pin. */</span></div><div class="line">    g_opamp_cfg_extend.plus_input_select_opamp0  = <a class="code" href="group___o_p_a_m_p.html#gga4b9382978430a5e9b11d638a507823f2a17bead713855afcc1b0fdc92d4eca6c4">OPAMP_PLUS_INPUT_AMPPS7</a>;</div><div class="line">    g_opamp_cfg_extend.minus_input_select_opamp0 = <a class="code" href="group___o_p_a_m_p.html#gga1e044ea7340766331d8ab71fe18ff315acf4eb7f7ff07e971ce0c68acbf3d1ede">OPAMP_MINUS_INPUT_AMPMS7</a>;</div><div class="line"></div><div class="line">    <span class="comment">/* Initialize the OPAMP module. */</span></div><div class="line">    err = <a class="code" href="group___o_p_a_m_p.html#gaeeb57e46c30f78afb0d6d6b486b87dde">R_OPAMP_Open</a>(&amp;g_opamp_ctrl, &amp;g_opamp_cfg);</div><div class="line"></div><div class="line">    <span class="comment">/* Handle any errors. This function should be defined by the user. */</span></div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Start the OPAMP module. */</span></div><div class="line">    err = <a class="code" href="group___o_p_a_m_p.html#ga53bed0c5b31bbad8092dec1903be5ee4">R_OPAMP_Start</a>(&amp;g_opamp_ctrl, 1 &lt;&lt; OPAMP_EXAMPLE_CHANNEL);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Look up the required stabilization wait time. */</span></div><div class="line">    <a class="code" href="group___o_p_a_m_p___a_p_i.html#structopamp__info__t">opamp_info_t</a> info;</div><div class="line">    err = <a class="code" href="group___o_p_a_m_p.html#gae9525d8b0ad8ef12686c89b33d1f9184">R_OPAMP_InfoGet</a>(&amp;g_opamp_ctrl, &amp;info);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Wait for the OPAMP to stabilize. */</span></div><div class="line">    <a class="code" href="group___b_s_p___m_c_u.html#gaf3219448adfd1531cf69f68697ab184b">R_BSP_SoftwareDelay</a>(info.<a class="code" href="group___o_p_a_m_p___a_p_i.html#aa3b8654dc37cbf757ed525665c859bfa">min_stabilization_wait_us</a>, <a class="code" href="group___b_s_p___m_c_u.html#ggafd98e2a6f080d6a52a3ef72e3d731b2baa0312618f2508347a9a815b5887c12ae">BSP_DELAY_UNITS_MICROSECONDS</a>);</div><div class="line"></div><div class="line">    <span class="comment">/* Call trim() for the Pch (+) side input */</span></div><div class="line">    trim_procedure(&amp;trim_args_ch);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    trim_args_ch.<a class="code" href="group___o_p_a_m_p___a_p_i.html#ad66bf484e27eafa3ccbeceba63f6b735">input</a> = <a class="code" href="group___o_p_a_m_p___a_p_i.html#gga225f7a2a63ee3dc11ce9853ada741b54abd12e84f2aed3db38e54b77c30a46b9e">OPAMP_TRIM_INPUT_NCH</a>;</div><div class="line"></div><div class="line">    <span class="comment">/* Call trim() for the Nch (-) side input */</span></div><div class="line">    trim_procedure(&amp;trim_args_ch);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> trim_procedure (<a class="code" href="group___o_p_a_m_p___a_p_i.html#structopamp__trim__args__t">opamp_trim_args_t</a> * trim_args)</div><div class="line">{</div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> err;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Call trim() for the selected channel and input with command OPAMP_TRIM_CMD_START. */</span></div><div class="line">    err = <a class="code" href="group___o_p_a_m_p.html#gacfcb03e4ea60b3408e3b88e76f1388ee">R_OPAMP_Trim</a>(&amp;g_opamp_ctrl, <a class="code" href="group___o_p_a_m_p___a_p_i.html#ggaaaf9fc8a2d64abefdf3f6f0dd8b0e42ba586061f8a88712f67e40fd4fc839511f">OPAMP_TRIM_CMD_START</a>, trim_args);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Measure the fixed voltage connected to the channel input using the SAR ADC and save the value</span></div><div class="line"><span class="comment">     * (referred to as result_a later in this procedure). */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Reset the ADC callback counter */</span></div><div class="line">    g_callback_event_counter = 0;</div><div class="line"></div><div class="line">    err = <a class="code" href="group___a_d_c.html#ga4a7fb2265b5a03c7586253ff28b3faf2">R_ADC_ScanStart</a>(&amp;g_adc_ctrl);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Wait for ADC scan complete flag */</span></div><div class="line">    uint32_t timeout = ADC_SCAN_END_MAX_TIMEOUT;</div><div class="line">    <span class="keywordflow">while</span> (g_callback_event_counter == 0 &amp;&amp; timeout != 0)</div><div class="line">    {</div><div class="line">        timeout--;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (0 == timeout)</div><div class="line">    {</div><div class="line">        err = <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#ggadfb1288da0fcc7ae1dc88c58601374f8a922f76a3a941dd4d49cc55d382cb16f4">FSP_ERR_TIMEOUT</a>;</div><div class="line">        assert(FSP_SUCCESS == err);</div><div class="line">    }</div><div class="line"></div><div class="line">    uint16_t result_a;</div><div class="line"></div><div class="line">    err = <a class="code" href="group___a_d_c.html#gad6bfc8395b53a96ee89f266fc940e2da">R_ADC_Read</a>(&amp;g_adc_ctrl, OPAMP_EXAMPLE_ADC_CHANNEL, &amp;result_a);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Iterate over the following loop 5 times: */</span></div><div class="line">    <span class="comment">/* Call trim() with command OPAMP_TRIM_CMD_NEXT_STEP for the selected channel and given input. */</span></div><div class="line"></div><div class="line">    uint8_t count = OPAMP_TRIM_LOOP_COUNT;</div><div class="line">    <span class="keywordflow">while</span> (count &gt; 0)</div><div class="line">    {</div><div class="line">        count--;</div><div class="line">        err = <a class="code" href="group___o_p_a_m_p.html#gacfcb03e4ea60b3408e3b88e76f1388ee">R_OPAMP_Trim</a>(&amp;g_opamp_ctrl, <a class="code" href="group___o_p_a_m_p___a_p_i.html#ggaaaf9fc8a2d64abefdf3f6f0dd8b0e42ba9ae9d52123a762283440d2e75ecd7be7">OPAMP_TRIM_CMD_NEXT_STEP</a>, trim_args);</div><div class="line">        assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">        <span class="comment">/* Reset the ADC callback counter */</span></div><div class="line">        g_callback_event_counter = 0;</div><div class="line"></div><div class="line">        <span class="comment">/* Read converted value after trim completes. */</span></div><div class="line">        err = <a class="code" href="group___a_d_c.html#ga4a7fb2265b5a03c7586253ff28b3faf2">R_ADC_ScanStart</a>(&amp;g_adc_ctrl);</div><div class="line">        assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">        <span class="comment">/* Wait for ADC scan complete flag */</span></div><div class="line">        timeout = ADC_SCAN_END_MAX_TIMEOUT;</div><div class="line"></div><div class="line">        <span class="keywordflow">while</span> (g_callback_event_counter == 0 &amp;&amp; timeout != 0)</div><div class="line">        {</div><div class="line">            timeout--;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (0 == timeout)</div><div class="line">        {</div><div class="line">            err = <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#ggadfb1288da0fcc7ae1dc88c58601374f8a922f76a3a941dd4d49cc55d382cb16f4">FSP_ERR_TIMEOUT</a>;</div><div class="line">            assert(FSP_SUCCESS == err);</div><div class="line">        }</div><div class="line"></div><div class="line">        uint16_t result_b;</div><div class="line"></div><div class="line">        err = <a class="code" href="group___a_d_c.html#gad6bfc8395b53a96ee89f266fc940e2da">R_ADC_Read</a>(&amp;g_adc_ctrl, OPAMP_EXAMPLE_ADC_CHANNEL, &amp;result_b);</div><div class="line">        assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">        <span class="comment">/* Measure the op-amp output using the SAR ADC (referred to as result_b in the next step). */</span></div><div class="line"></div><div class="line">        <span class="comment">/* If result_a &lt;= result_b, call trim() for the selected channel and input with command OPAMP_TRIM_CMD_CLEAR_BIT. */</span></div><div class="line">        <span class="keywordflow">if</span> (result_a &lt;= result_b)</div><div class="line">        {</div><div class="line">            err = <a class="code" href="group___o_p_a_m_p.html#gacfcb03e4ea60b3408e3b88e76f1388ee">R_OPAMP_Trim</a>(&amp;g_opamp_ctrl, <a class="code" href="group___o_p_a_m_p___a_p_i.html#ggaaaf9fc8a2d64abefdf3f6f0dd8b0e42ba802f53a4659eddf4626c5fc560c78edc">OPAMP_TRIM_CMD_CLEAR_BIT</a>, trim_args);</div><div class="line">            assert(FSP_SUCCESS == err);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div><div class="line"></div></div><!-- fragment --><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structopamp__extended__cfg__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#structopamp__extended__cfg__t">opamp_extended_cfg_t</a></td></tr>
<tr class="separator:structopamp__extended__cfg__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structopamp__instance__ctrl__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#structopamp__instance__ctrl__t">opamp_instance_ctrl_t</a></td></tr>
<tr class="separator:structopamp__instance__ctrl__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga08c1536fc7f2476305644d5b2972093d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#ga08c1536fc7f2476305644d5b2972093d">OPAMP_MASK_CHANNEL_0</a></td></tr>
<tr class="separator:ga08c1536fc7f2476305644d5b2972093d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga0d3e1efd7c7da420f0c6f86301557472"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#ga0d3e1efd7c7da420f0c6f86301557472">opamp_trigger_t</a> </td></tr>
<tr class="separator:ga0d3e1efd7c7da420f0c6f86301557472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff013cd26c871c6ec7e2ed3a584981ff"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#gaff013cd26c871c6ec7e2ed3a584981ff">opamp_agt_link_t</a> </td></tr>
<tr class="separator:gaff013cd26c871c6ec7e2ed3a584981ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeecc226775e0b3b71af2e4e055fd7923"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#gaeecc226775e0b3b71af2e4e055fd7923">opamp_mode_t</a> </td></tr>
<tr class="separator:gaeecc226775e0b3b71af2e4e055fd7923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b9382978430a5e9b11d638a507823f2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#ga4b9382978430a5e9b11d638a507823f2">opamp_plus_input_t</a> </td></tr>
<tr class="separator:ga4b9382978430a5e9b11d638a507823f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e044ea7340766331d8ab71fe18ff315"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#ga1e044ea7340766331d8ab71fe18ff315">opamp_minus_input_t</a> </td></tr>
<tr class="separator:ga1e044ea7340766331d8ab71fe18ff315"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1a6df2ce9c3f388ce3acd2dc14a1f2dc"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#ga1a6df2ce9c3f388ce3acd2dc14a1f2dc">opamp_output_t</a> </td></tr>
<tr class="separator:ga1a6df2ce9c3f388ce3acd2dc14a1f2dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga7dde0adadfb1020d985abd60ebb8c1a6"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="group___o_p_a_m_p___a_p_i.html#structopamp__api__t">opamp_api_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_p_a_m_p.html#ga7dde0adadfb1020d985abd60ebb8c1a6">g_opamp_on_opamp</a></td></tr>
<tr class="separator:ga7dde0adadfb1020d985abd60ebb8c1a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structopamp__extended__cfg__t" id="structopamp__extended__cfg__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structopamp__extended__cfg__t">&#9670;&nbsp;</a></span>opamp_extended_cfg_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct opamp_extended_cfg_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>OPAMP configuration extension. This extension is required and must be provided in <a class="el" href="group___o_p_a_m_p___a_p_i.html#a73889611379b4922ce4fab9ffcd7adc1" title="Extension parameter for hardware specific settings. ">opamp_cfg_t::p_extend</a>. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="ae431877ef8a6c4d71170c16fc500c685"></a><a class="el" href="group___o_p_a_m_p.html#gaff013cd26c871c6ec7e2ed3a584981ff">opamp_agt_link_t</a></td>
<td class="fieldname">
agt_link</td>
<td class="fielddoc">
<p>Configure which AGT links are paired to which channel. Only applies to channels if OPAMP_TRIGGER_AGT_START_SOFTWARE_STOP or OPAMP_TRIGGER_AGT_START_ADC_STOP is selected for the channel. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ac884d13f70da29fc88da52d313e37c66"></a><a class="el" href="group___o_p_a_m_p.html#gaeecc226775e0b3b71af2e4e055fd7923">opamp_mode_t</a></td>
<td class="fieldname">
mode</td>
<td class="fielddoc">
Low power, middle speed, or high speed mode. </td></tr>
<tr><td class="fieldtype">
<a id="a149f304112984efe791a95fc467a9367"></a><a class="el" href="group___o_p_a_m_p.html#ga0d3e1efd7c7da420f0c6f86301557472">opamp_trigger_t</a></td>
<td class="fieldname">
trigger_channel_0</td>
<td class="fielddoc">
Start and stop triggers for channel 0. </td></tr>
<tr><td class="fieldtype">
<a id="afab0331422671eeabdc30219ad344646"></a><a class="el" href="group___o_p_a_m_p.html#ga0d3e1efd7c7da420f0c6f86301557472">opamp_trigger_t</a></td>
<td class="fieldname">
trigger_channel_1</td>
<td class="fielddoc">
Start and stop triggers for channel 1. </td></tr>
<tr><td class="fieldtype">
<a id="aea45c601a6a0e9edd26db05c42244526"></a><a class="el" href="group___o_p_a_m_p.html#ga0d3e1efd7c7da420f0c6f86301557472">opamp_trigger_t</a></td>
<td class="fieldname">
trigger_channel_2</td>
<td class="fielddoc">
Start and stop triggers for channel 2. </td></tr>
<tr><td class="fieldtype">
<a id="a26a6b256c0c2b33c6de92cc9bab5f05d"></a><a class="el" href="group___o_p_a_m_p.html#ga0d3e1efd7c7da420f0c6f86301557472">opamp_trigger_t</a></td>
<td class="fieldname">
trigger_channel_3</td>
<td class="fielddoc">
Start and stop triggers for channel 3. </td></tr>
<tr><td class="fieldtype">
<a id="a9d4d46571cb790bf0d1f6d1f4c50b619"></a><a class="el" href="group___o_p_a_m_p.html#ga4b9382978430a5e9b11d638a507823f2">opamp_plus_input_t</a></td>
<td class="fieldname">
plus_input_select_opamp0</td>
<td class="fielddoc">
OPAMP0+ connection. </td></tr>
<tr><td class="fieldtype">
<a id="a635465627c1fc2e3a2183670c9c3495d"></a><a class="el" href="group___o_p_a_m_p.html#ga1e044ea7340766331d8ab71fe18ff315">opamp_minus_input_t</a></td>
<td class="fieldname">
minus_input_select_opamp0</td>
<td class="fielddoc">
OPAMP0- connection. </td></tr>
<tr><td class="fieldtype">
<a id="a163c43c208586e24d76efef81aa5ab78"></a><a class="el" href="group___o_p_a_m_p.html#ga1a6df2ce9c3f388ce3acd2dc14a1f2dc">opamp_output_t</a></td>
<td class="fieldname">
output_select_opamp0</td>
<td class="fielddoc">
OPAMP0O connection. </td></tr>
<tr><td class="fieldtype">
<a id="ae24a9987b081ad06bee59d8d78d6e8ca"></a><a class="el" href="group___o_p_a_m_p.html#ga4b9382978430a5e9b11d638a507823f2">opamp_plus_input_t</a></td>
<td class="fieldname">
plus_input_select_opamp1</td>
<td class="fielddoc">
OPAMP1+ connection. </td></tr>
<tr><td class="fieldtype">
<a id="a583d32ce0dbec6b3708f1b84d56b255a"></a><a class="el" href="group___o_p_a_m_p.html#ga1e044ea7340766331d8ab71fe18ff315">opamp_minus_input_t</a></td>
<td class="fieldname">
minus_input_select_opamp1</td>
<td class="fielddoc">
OPAMP1- connection. </td></tr>
<tr><td class="fieldtype">
<a id="a8652257eeae74d7145437fd60c537b8b"></a><a class="el" href="group___o_p_a_m_p.html#ga4b9382978430a5e9b11d638a507823f2">opamp_plus_input_t</a></td>
<td class="fieldname">
plus_input_select_opamp2</td>
<td class="fielddoc">
OPAMP2+ connection. </td></tr>
<tr><td class="fieldtype">
<a id="ac0f43f0f5a519b22ac931ad4a0b3a359"></a><a class="el" href="group___o_p_a_m_p.html#ga1e044ea7340766331d8ab71fe18ff315">opamp_minus_input_t</a></td>
<td class="fieldname">
minus_input_select_opamp2</td>
<td class="fielddoc">
OPAMP2- connection. </td></tr>
</table>

</div>
</div>
<a name="structopamp__instance__ctrl__t" id="structopamp__instance__ctrl__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structopamp__instance__ctrl__t">&#9670;&nbsp;</a></span>opamp_instance_ctrl_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct opamp_instance_ctrl_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>OPAMP instance control block. DO NOT INITIALIZE. Initialized in <a class="el" href="group___o_p_a_m_p___a_p_i.html#a970490308ddbd7dcab484c84c1298581">opamp_api_t::open()</a>. </p>
</div>
</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga08c1536fc7f2476305644d5b2972093d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga08c1536fc7f2476305644d5b2972093d">&#9670;&nbsp;</a></span>OPAMP_MASK_CHANNEL_0</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OPAMP_MASK_CHANNEL_0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Version of code that implements the API defined in this file </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga0d3e1efd7c7da420f0c6f86301557472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d3e1efd7c7da420f0c6f86301557472">&#9670;&nbsp;</a></span>opamp_trigger_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___o_p_a_m_p.html#ga0d3e1efd7c7da420f0c6f86301557472">opamp_trigger_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start and stop trigger for the op-amp. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga0d3e1efd7c7da420f0c6f86301557472a58b02b5ca08496348852fac591d61866"></a>OPAMP_TRIGGER_SOFTWARE_START_SOFTWARE_STOP&#160;</td><td class="fielddoc"><p>Start and stop with APIs. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga0d3e1efd7c7da420f0c6f86301557472ae8aa951c81f4e8156ce92b7749bc9d59"></a>OPAMP_TRIGGER_AGT_START_SOFTWARE_STOP&#160;</td><td class="fielddoc"><p>Start by AGT compare match and stop with API. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga0d3e1efd7c7da420f0c6f86301557472a0dc44336bb00ecd8eb968708e4b3e1a9"></a>OPAMP_TRIGGER_AGT_START_ADC_STOP&#160;</td><td class="fielddoc"><p>Start by AGT compare match and stop after ADC conversion. </p>
</td></tr>
</table>

</div>
</div>
<a id="gaff013cd26c871c6ec7e2ed3a584981ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaff013cd26c871c6ec7e2ed3a584981ff">&#9670;&nbsp;</a></span>opamp_agt_link_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___o_p_a_m_p.html#gaff013cd26c871c6ec7e2ed3a584981ff">opamp_agt_link_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Which AGT timer starts the op-amp. Only applies to channels if OPAMP_TRIGGER_AGT_START_SOFTWARE_STOP or OPAMP_TRIGGER_AGT_START_ADC_STOP is selected for the channel. If OPAMP_TRIGGER_SOFTWARE_START_SOFTWARE_STOP is selected for a channel, then no AGT compare match event will start that op-amp channel. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaff013cd26c871c6ec7e2ed3a584981ffa8ebe9a9064f0dfd6e0ce33f865f78989"></a>OPAMP_AGT_LINK_AGT1_OPAMP_0_2_AGT0_OPAMP_1_3&#160;</td><td class="fielddoc"><p>OPAMP channel 0 and 2 are started by AGT1 compare match. OPAMP channel 1 and 3 are started by AGT0 compare match. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaff013cd26c871c6ec7e2ed3a584981ffaaaf0b86c6b19eb6d0530e68f15853190"></a>OPAMP_AGT_LINK_AGT1_OPAMP_0_1_AGT0_OPAMP_2_3&#160;</td><td class="fielddoc"><p>OPAMP channel 0 and 1 are started by AGT1 compare match. OPAMP channel 2 and 3 are started by AGT0 compare match. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaff013cd26c871c6ec7e2ed3a584981ffa609323c347f9789acab688acd02d73cd"></a>OPAMP_AGT_LINK_AGT1_OPAMP_0_1_2_3&#160;</td><td class="fielddoc"><p>All OPAMP channels are started by AGT1 compare match. </p>
</td></tr>
</table>

</div>
</div>
<a id="gaeecc226775e0b3b71af2e4e055fd7923"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeecc226775e0b3b71af2e4e055fd7923">&#9670;&nbsp;</a></span>opamp_mode_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___o_p_a_m_p.html#gaeecc226775e0b3b71af2e4e055fd7923">opamp_mode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Op-amp mode. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaeecc226775e0b3b71af2e4e055fd7923aa5598df1dee484b2aacf067668265aa1"></a>OPAMP_MODE_LOW_POWER&#160;</td><td class="fielddoc"><p>Low power mode. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaeecc226775e0b3b71af2e4e055fd7923ab9ad904bb5e247027e69bc4bc193f978"></a>OPAMP_MODE_MIDDLE_SPEED&#160;</td><td class="fielddoc"><p>Middle speed mode (not supported on all MCUs) </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaeecc226775e0b3b71af2e4e055fd7923a27dd7d42f2d7908b03eeb2ed804d7c3e"></a>OPAMP_MODE_HIGH_SPEED&#160;</td><td class="fielddoc"><p>High speed mode. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga4b9382978430a5e9b11d638a507823f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4b9382978430a5e9b11d638a507823f2">&#9670;&nbsp;</a></span>opamp_plus_input_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___o_p_a_m_p.html#ga4b9382978430a5e9b11d638a507823f2">opamp_plus_input_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Options to connect AMPnPS pins. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga4b9382978430a5e9b11d638a507823f2aa8d275b67e66a12c7cc15f274e377a0c"></a>OPAMP_PLUS_INPUT_NONE&#160;</td><td class="fielddoc"><p>No Connection. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga4b9382978430a5e9b11d638a507823f2a289971c0946b51d7458c6af59710fb24"></a>OPAMP_PLUS_INPUT_AMPPS0&#160;</td><td class="fielddoc"><p>Set AMPPS0. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga4b9382978430a5e9b11d638a507823f2a9e17aea86508727cf27645c5603e53f8"></a>OPAMP_PLUS_INPUT_AMPPS1&#160;</td><td class="fielddoc"><p>Set AMPPS1. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga4b9382978430a5e9b11d638a507823f2a3adbd1ada09f8262d86c4a3d0e3071ce"></a>OPAMP_PLUS_INPUT_AMPPS2&#160;</td><td class="fielddoc"><p>Set AMPPS2. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga4b9382978430a5e9b11d638a507823f2a0edab4ab92475937dfd7529ed2e43532"></a>OPAMP_PLUS_INPUT_AMPPS3&#160;</td><td class="fielddoc"><p>Set AMPPS3. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga4b9382978430a5e9b11d638a507823f2a17bead713855afcc1b0fdc92d4eca6c4"></a>OPAMP_PLUS_INPUT_AMPPS7&#160;</td><td class="fielddoc"><p>Set AMPPS7. See hardware manual for channel specific options. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga1e044ea7340766331d8ab71fe18ff315"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1e044ea7340766331d8ab71fe18ff315">&#9670;&nbsp;</a></span>opamp_minus_input_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___o_p_a_m_p.html#ga1e044ea7340766331d8ab71fe18ff315">opamp_minus_input_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Options to connect AMPnMS pins. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga1e044ea7340766331d8ab71fe18ff315a01b0c00914cf77a10d8703af20c4212b"></a>OPAMP_MINUS_INPUT_NONE&#160;</td><td class="fielddoc"><p>No Connection. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga1e044ea7340766331d8ab71fe18ff315a03713fad1957a5f972a00eaa1fad142b"></a>OPAMP_MINUS_INPUT_AMPMS0&#160;</td><td class="fielddoc"><p>Set AMPMS0. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga1e044ea7340766331d8ab71fe18ff315ae8402bbcd4c9eb05ee425f78eb7ff85f"></a>OPAMP_MINUS_INPUT_AMPMS1&#160;</td><td class="fielddoc"><p>Set AMPMS1. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga1e044ea7340766331d8ab71fe18ff315a75759848f9b40508bbe6466a1dd828e8"></a>OPAMP_MINUS_INPUT_AMPMS2&#160;</td><td class="fielddoc"><p>Set AMPMS2. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga1e044ea7340766331d8ab71fe18ff315aeb04475184f2822f4f7b4c19f5b5233d"></a>OPAMP_MINUS_INPUT_AMPMS3&#160;</td><td class="fielddoc"><p>Set AMPMS3. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga1e044ea7340766331d8ab71fe18ff315a0276ebde3cd3c0fa0d97cc5b01c95545"></a>OPAMP_MINUS_INPUT_AMPMS4&#160;</td><td class="fielddoc"><p>Set AMPMS4. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga1e044ea7340766331d8ab71fe18ff315acf4eb7f7ff07e971ce0c68acbf3d1ede"></a>OPAMP_MINUS_INPUT_AMPMS7&#160;</td><td class="fielddoc"><p>Set AMPMS7. See hardware manual for channel specific options. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga1a6df2ce9c3f388ce3acd2dc14a1f2dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1a6df2ce9c3f388ce3acd2dc14a1f2dc">&#9670;&nbsp;</a></span>opamp_output_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___o_p_a_m_p.html#ga1a6df2ce9c3f388ce3acd2dc14a1f2dc">opamp_output_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Options to connect AMP0OS pin. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga1a6df2ce9c3f388ce3acd2dc14a1f2dca7aa672358074da170f839f93559eb20f"></a>OPAMP_OUTPUT_NONE&#160;</td><td class="fielddoc"><p>No Connection. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga1a6df2ce9c3f388ce3acd2dc14a1f2dcaebb015736cfcc639a26624d9b6c52885"></a>OPAMP_OUTPUT_AMPOS0&#160;</td><td class="fielddoc"><p>Set AMPOS0. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga1a6df2ce9c3f388ce3acd2dc14a1f2dcac1d14d1fab6de879b3f91eb8a3178f69"></a>OPAMP_OUTPUT_AMPOS1&#160;</td><td class="fielddoc"><p>Set AMPOS1. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga1a6df2ce9c3f388ce3acd2dc14a1f2dca0c20a1c863c835553523d5150dc3d13b"></a>OPAMP_OUTPUT_AMPOS2&#160;</td><td class="fielddoc"><p>Set AMPOS2. See hardware manual for channel specific options. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga1a6df2ce9c3f388ce3acd2dc14a1f2dcaa004871e961cfed5ad6a45fdadfa9ffe"></a>OPAMP_OUTPUT_AMPOS3&#160;</td><td class="fielddoc"><p>Set AMPOS3. See hardware manual for channel specific options. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaeeb57e46c30f78afb0d6d6b486b87dde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeeb57e46c30f78afb0d6d6b486b87dde">&#9670;&nbsp;</a></span>R_OPAMP_Open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_OPAMP_Open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#structopamp__cfg__t">opamp_cfg_t</a> const *const&#160;</td>
          <td class="paramname"><em>p_cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Applies power to the OPAMP and initializes the hardware based on the user configuration. Implements <a class="el" href="group___o_p_a_m_p___a_p_i.html#a970490308ddbd7dcab484c84c1298581">opamp_api_t::open</a>.</p>
<p>The op-amp is not operational until the <a class="el" href="group___o_p_a_m_p___a_p_i.html#a0b65047c7ec97890dc00e6b85fab0d3a">opamp_api_t::start</a> is called. If the op-amp is configured to start after AGT compare match, the op-amp is not operational until <a class="el" href="group___o_p_a_m_p___a_p_i.html#a0b65047c7ec97890dc00e6b85fab0d3a">opamp_api_t::start</a> and the associated AGT compare match event occurs.</p>
<p>Some MCUs have switches that must be set before starting the op-amp. These switches must be set in the application code after <a class="el" href="group___o_p_a_m_p___a_p_i.html#a970490308ddbd7dcab484c84c1298581">opamp_api_t::open</a> and before <a class="el" href="group___o_p_a_m_p___a_p_i.html#a0b65047c7ec97890dc00e6b85fab0d3a">opamp_api_t::start</a>.</p>
<p>Example: </p><div class="fragment"><div class="line"></div><div class="line">    <span class="comment">/* Initialize the OPAMP module. */</span></div><div class="line">    err = <a class="code" href="group___o_p_a_m_p.html#gaeeb57e46c30f78afb0d6d6b486b87dde">R_OPAMP_Open</a>(&amp;g_opamp_ctrl, &amp;g_opamp_cfg);</div><div class="line"></div></div><!-- fragment --> <dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Configuration successful. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>An input pointer is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_ALREADY_OPEN</td><td>Control block is already opened. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_ARGUMENT</td><td>An attempt to configure OPAMP in middle speed mode on MCU that does not support middle speed mode. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae9525d8b0ad8ef12686c89b33d1f9184"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9525d8b0ad8ef12686c89b33d1f9184">&#9670;&nbsp;</a></span>R_OPAMP_InfoGet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_OPAMP_InfoGet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#structopamp__info__t">opamp_info_t</a> *const&#160;</td>
          <td class="paramname"><em>p_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provides the minimum stabilization wait time in microseconds. Implements <a class="el" href="group___o_p_a_m_p___a_p_i.html#a84aff8b18eb1e166ea166fd3891ea764">opamp_api_t::infoGet</a>.</p>
<ul>
<li>Example: <div class="fragment"><div class="line"></div><div class="line">    <span class="comment">/* Look up the required stabilization wait time. */</span></div><div class="line">    <a class="code" href="group___o_p_a_m_p___a_p_i.html#structopamp__info__t">opamp_info_t</a> info;</div><div class="line">    err = <a class="code" href="group___o_p_a_m_p.html#gae9525d8b0ad8ef12686c89b33d1f9184">R_OPAMP_InfoGet</a>(&amp;g_opamp_ctrl, &amp;info);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Wait for the OPAMP to stabilize. */</span></div><div class="line">    <a class="code" href="group___b_s_p___m_c_u.html#gaf3219448adfd1531cf69f68697ab184b">R_BSP_SoftwareDelay</a>(info.<a class="code" href="group___o_p_a_m_p___a_p_i.html#aa3b8654dc37cbf757ed525665c859bfa">min_stabilization_wait_us</a>, <a class="code" href="group___b_s_p___m_c_u.html#ggafd98e2a6f080d6a52a3ef72e3d731b2baa0312618f2508347a9a815b5887c12ae">BSP_DELAY_UNITS_MICROSECONDS</a>);</div><div class="line"></div></div><!-- fragment --> <dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>information on opamp_power_mode stored in p_info. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>An input pointer was NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>Instance control block is not open. </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>

</div>
</div>
<a id="ga53bed0c5b31bbad8092dec1903be5ee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga53bed0c5b31bbad8092dec1903be5ee4">&#9670;&nbsp;</a></span>R_OPAMP_Start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_OPAMP_Start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t const&#160;</td>
          <td class="paramname"><em>channel_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If the OPAMP is configured for hardware triggers, enables hardware triggers. Otherwise, starts the op-amp. Implements <a class="el" href="group___o_p_a_m_p___a_p_i.html#a0b65047c7ec97890dc00e6b85fab0d3a">opamp_api_t::start</a>.</p>
<p>Some MCUs have switches that must be set before starting the op-amp. These switches must be set in the application code after <a class="el" href="group___o_p_a_m_p___a_p_i.html#a970490308ddbd7dcab484c84c1298581">opamp_api_t::open</a> and before <a class="el" href="group___o_p_a_m_p___a_p_i.html#a0b65047c7ec97890dc00e6b85fab0d3a">opamp_api_t::start</a>.</p>
<p>Example: </p><div class="fragment"><div class="line"></div><div class="line">    <span class="comment">/* Start the OPAMP module. */</span></div><div class="line">    err = <a class="code" href="group___o_p_a_m_p.html#ga53bed0c5b31bbad8092dec1903be5ee4">R_OPAMP_Start</a>(&amp;g_opamp_ctrl, 1 &lt;&lt; OPAMP_EXAMPLE_CHANNEL);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div></div><!-- fragment --> <dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Op-amp started or hardware triggers enabled successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>An input pointer was NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>Instance control block is not open. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_ARGUMENT</td><td>channel_mask includes a channel that does not exist on this MCU. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab449713d7790a4e73317211178166c2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab449713d7790a4e73317211178166c2a">&#9670;&nbsp;</a></span>R_OPAMP_Stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_OPAMP_Stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t const&#160;</td>
          <td class="paramname"><em>channel_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stops the op-amp. If the OPAMP is configured for hardware triggers, disables hardware triggers. Implements <a class="el" href="group___o_p_a_m_p___a_p_i.html#a501b49dfe9cf49cbd31a1fd8b243962a">opamp_api_t::stop</a>.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Op-amp stopped or hardware triggers disabled successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>An input pointer was NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>Instance control block is not open. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_ARGUMENT</td><td>channel_mask includes a channel that does not exist on this MCU. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga91a580e6f9e7117b2be8c9f07596d373"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga91a580e6f9e7117b2be8c9f07596d373">&#9670;&nbsp;</a></span>R_OPAMP_StatusGet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_OPAMP_StatusGet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#structopamp__status__t">opamp_status_t</a> *const&#160;</td>
          <td class="paramname"><em>p_status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provides the operating status for each op-amp in a bitmask. This bit is set when operation begins, before the stabilization wait time has elapsed. Implements <a class="el" href="group___o_p_a_m_p___a_p_i.html#ac100ead80121384eb5b640ce16f21e16">opamp_api_t::statusGet</a>.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Operating status of each op-amp provided in p_status. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>An input pointer was NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>Instance control block is not open. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gacfcb03e4ea60b3408e3b88e76f1388ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacfcb03e4ea60b3408e3b88e76f1388ee">&#9670;&nbsp;</a></span>R_OPAMP_Trim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_OPAMP_Trim </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#gaaaf9fc8a2d64abefdf3f6f0dd8b0e42b">opamp_trim_cmd_t</a> const&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#structopamp__trim__args__t">opamp_trim_args_t</a> const *const&#160;</td>
          <td class="paramname"><em>p_args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>On MCUs that support trimming, the op-amp trim register is set to the factory default after open(). This function allows the application to trim the operational amplifier to a user setting, which overwrites the factory default factory trim values.</p>
<p>Not supported on all MCUs. See hardware manual for details. Not supported if configured for low power mode (OPAMP_MODE_LOW_POWER).</p>
<p>This function is not reentrant. Only one side of one op-amp can be trimmed at a time. Complete the procedure for one side of one channel before calling trim() with command OPAMP_TRIM_CMD_START again.</p>
<p>Implements <a class="el" href="group___o_p_a_m_p___a_p_i.html#ac782f4e26e8e1f22cc47f2659dcf6989">opamp_api_t::trim</a>.</p>
<p>Reference: Section 37.9 "User Offset Trimming" RA2A1 hardware manual R01UM0008EU0130. The trim procedure works as follows:</p><ul>
<li>Call trim() for the Pch (+) side input with command OPAMP_TRIM_CMD_START.</li>
<li>Connect a fixed voltage to the Pch (+) input.</li>
<li>Connect the Nch (-) input to the op-amp output to create a voltage follower.</li>
<li>Ensure the op-amp is operating and stabilized.</li>
<li>Call trim() for the Pch (+) side input with command OPAMP_TRIM_CMD_START.</li>
<li>Measure the fixed voltage connected to the Pch (+) input using the SAR ADC and save the value (referred to as A later in this procedure).</li>
<li>Iterate over the following loop 5 times:<ul>
<li>Call trim() for the Pch (+) side input with command OPAMP_TRIM_CMD_NEXT_STEP.</li>
<li>Measure the op-amp output using the SAR ADC (referred to as B in the next step).</li>
<li>If A &lt;= B, call trim() for the Pch (+) side input with command OPAMP_TRIM_CMD_CLEAR_BIT.</li>
</ul>
</li>
<li>Call trim() for the Nch (-) side input with command OPAMP_TRIM_CMD_START.</li>
<li>Measure the fixed voltage connected to the Pch (+) input using the SAR ADC and save the value (referred to as A later in this procedure).</li>
<li>Iterate over the following loop 5 times:<ul>
<li>Call trim() for the Nch (-) side input with command OPAMP_TRIM_CMD_NEXT_STEP.</li>
<li>Measure the op-amp output using the SAR ADC (referred to as B in the next step).</li>
<li>If A &lt;= B, call trim() for the Nch (-) side input with command OPAMP_TRIM_CMD_CLEAR_BIT.</li>
</ul>
</li>
</ul>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Conversion result in p_data. </td></tr>
    <tr><td class="paramname">FSP_ERR_UNSUPPORTED</td><td>Trimming is not supported on this MCU. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_STATE</td><td>The command is not valid in the current state of the trim state machine. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_ARGUMENT</td><td>The requested channel is not operating or the trim procedure is not in progress for this channel/input combination. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_MODE</td><td>Trim is not allowed in low power mode. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>An input pointer was NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>Instance control block is not open. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga5590bdd0379906ac3c6af341ed41b1f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5590bdd0379906ac3c6af341ed41b1f1">&#9670;&nbsp;</a></span>R_OPAMP_Close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_OPAMP_Close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___o_p_a_m_p___a_p_i.html#gad6ded75dcb1a95240026fb4ad0b6ab63">opamp_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stops the op-amps. Implements <a class="el" href="group___o_p_a_m_p___a_p_i.html#af09f2b996eeb11833a5a21c6df7f3834">opamp_api_t::close</a>.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Instance control block closed successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>An input pointer was NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>Instance control block is not open. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga7dde0adadfb1020d985abd60ebb8c1a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7dde0adadfb1020d985abd60ebb8c1a6">&#9670;&nbsp;</a></span>g_opamp_on_opamp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="group___o_p_a_m_p___a_p_i.html#structopamp__api__t">opamp_api_t</a> g_opamp_on_opamp</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>OPAMP Implementation of OPAMP interface. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
        <li class="footer">FSP Release v3.5.0 User's Manual Copyright  (2021) Renesas Electronics Corporation. All Rights Reserved.</li>
  </ul>
</div>
</body>
</html>
