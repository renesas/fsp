<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>RA Flexible Software Package Documentation: External IRQ (r_icu)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <script type="text/javascript" src="search/lunr.js"></script>
    <link href="search/lunrsearch.css" rel="stylesheet" type="text/css">
    <script src="search/lunr_index.js"></script>
    <script src="search/lunrclient.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
    $(document).ready(function() {
        $("tr.tree_lvl_1").nextUntil("tr.tree_lvl_1,tr.tree_none").hide();
		$("tr.tree_lvl_1").data("expanded","0");
		$("tr.tree_lvl_2").data("expanded","0");
		$("tr.tree_lvl_3").data("expanded","0");
		$("tr.tree_lvl_4").data("expanded","0");
		$("tr.tree_lvl_5").data("expanded","0");
        $("tr.tree_lvl_1").click(function() {
		    var lvl_1_is_open = $(this).data("expanded");
		    if (lvl_1_is_open == "0") {
                $(this).nextUntil("tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_2, tr.tree_lvl_1_item").show();
                $(this).find("span").removeClass("chevron-collapsed").addClass("chevron-expanded");
				$(this).data("expanded","1");
			} else {
			    $(this).nextUntil("tr.tree_lvl_1,tr.tree_none").hide();
                $(this).nextUntil("tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_2,tr.tree_lvl_3,tr.tree_lvl_4,tr.tree_lvl_5").find("span").removeClass("chevron-expanded").addClass("chevron-collapsed");
				$(this).nextUntil("tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_2,tr.tree_lvl_3,tr.tree_lvl_4,tr.tree_lvl_5").data("expanded","0");
				$(this).find("span").removeClass("chevron-expanded").addClass("chevron-collapsed");
				$(this).data("expanded","0");
			    }
        });
		$("tr.tree_lvl_2").click(function() {
		    var lvl_2_is_open = $(this).data("expanded");
		    if (lvl_2_is_open == "0") {
                $(this).nextUntil("tr.tree_lvl_2,tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_3, tr.tree_lvl_2_item").show();
                $(this).find("span").removeClass("chevron-collapsed").addClass("chevron-expanded");
				$(this).data("expanded","1");
			} else {
			    $(this).nextUntil("tr.tree_lvl_2,tr.tree_lvl_1_item,tr.tree_lvl_1,tr.tree_none").hide();
				$(this).nextUntil("tr.tree_lvl_2,tr.tree_lvl_1_item,tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_3,tr.tree_lvl_4,tr.tree_lvl_5").find("span").removeClass("chevron-expanded").addClass("chevron-collapsed");
				$(this).nextUntil("tr.tree_lvl_2,tr.tree_lvl_1_item,tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_3,tr.tree_lvl_4,tr.tree_lvl_5").data("expanded","0");
				$(this).find("span").removeClass("chevron-expanded").addClass("chevron-collapsed");
				$(this).data("expanded","0");
			    }
        });
		$("tr.tree_lvl_3").click(function() {
		    var lvl_3_is_open = $(this).data("expanded");
		    if (lvl_3_is_open == "0") {
                $(this).nextUntil("tr.tree_lvl_3,tr.tree_lvl_2,tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_4, tr.tree_lvl_3_item").show();
                $(this).find("span").removeClass("chevron-collapsed").addClass("chevron-expanded");
				$(this).data("expanded","1");
			} else {
			    $(this).nextUntil("tr.tree_lvl_3,tr.tree_lvl_2_item,tr.tree_lvl_2,tr.tree_lvl_1_item,tr.tree_lvl_1,tr.tree_none").hide();
                $(this).nextUntil("tr.tree_lvl_3,tr.tree_lvl_2_item,tr.tree_lvl_2,tr.tree_lvl_1_item,tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_4, tr.tree_lvl_5").find("span").removeClass("chevron-expanded").addClass("chevron-collapsed");
				$(this).nextUntil("tr.tree_lvl_3,tr.tree_lvl_2_item,tr.tree_lvl_2,tr.tree_lvl_1_item,tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_4, tr.tree_lvl_5").data("expanded","0");
				$(this).find("span").removeClass("chevron-expanded").addClass("chevron-collapsed");
				$(this).data("expanded","0");
			    }
        });
		$("tr.tree_lvl_4").click(function() {
		    var lvl_4_is_open = $(this).data("expanded");
		    if (lvl_4_is_open == "0") {
                $(this).nextUntil("tr.tree_lvl_4,tr.tree_lvl_3,tr.tree_lvl_2,tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_5, tr.tree_lvl_4_item").show();
                $(this).find("span").removeClass("chevron-collapsed").addClass("chevron-expanded");
				$(this).data("expanded","1");
			} else {
			    $(this).nextUntil("tr.tree_lvl_4,tr.tree_lvl_3_item,tr.tree_lvl_3,tr.tree_lvl_2_item,tr.tree_lvl_2,tr.tree_lvl_1_item,tr.tree_lvl_1,tr.tree_none").hide();
                $(this).nextUntil("tr.tree_lvl_4,tr.tree_lvl_3_item,tr.tree_lvl_3,tr.tree_lvl_2_item,tr.tree_lvl_2,tr.tree_lvl_1_item,tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_5").find("span").removeClass("chevron-expanded").addClass("chevron-collapsed");
				$(this).nextUntil("tr.tree_lvl_4,tr.tree_lvl_3_item,tr.tree_lvl_3,tr.tree_lvl_2_item,tr.tree_lvl_2,tr.tree_lvl_1_item,tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_5").data("expanded","0");
				$(this).find("span").removeClass("chevron-expanded").addClass("chevron-collapsed");
				$(this).data("expanded","0");
			    }
        });
		$("tr.tree_lvl_5").click(function() {
		    var lvl_5_is_open = $(this).data("expanded");
		    if (lvl_5_is_open == "0") {
                $(this).nextUntil("tr.tree_lvl_5,tr.tree_lvl_4,tr.tree_lvl_3,tr.tree_lvl_2,tr.tree_lvl_1,tr.tree_none", "tr.tree_lvl_5_item").show();
                $(this).find("span").removeClass("chevron-collapsed").addClass("chevron-expanded");
				$(this).data("expanded","1");
			} else {
			    $(this).nextUntil("tr.tree_lvl_5,tr.tree_lvl_4_item,tr.tree_lvl_4,tr.tree_lvl_3_item,tr.tree_lvl_3,tr.tree_lvl_2_item,tr.tree_lvl_2,tr.tree_lvl_1_item,tr.tree_lvl_1,tr.tree_none").hide();
				$(this).find("span").removeClass("chevron-expanded").addClass("chevron-collapsed");
				$(this).data("expanded","0");
			    }
        });
     });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_scaled.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RA Flexible Software Package Documentation
   &#160;<span id="projectnumber">Release v6.2.0</span>
   </div>
  </td>
   <td>        <br /><div id="MSearchBox" class="MSearchBoxInactive">

    <form id="lunrSearchForm" name="lunrSearchForm">
      <span class="left" >
          <img id="MSearchSelect" src="search/mag_sel.png"
               alt=""/>
         <input class="search-input" id="MSearchField" name="q" placeholder="Search" type="text">
      </span>
      <span class="right">
          &nbsp;
      </span>
        <!--<input type="submit" value="Search">-->
    </form>
</div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___i_c_u.html','');});
</script>

<script src="search/mark.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    var options = {         // allows highlighting across element boundaries.
      "acrossElements": true
    };
    var bodyText = $("div.contents").text(); // try contents instead of body.
    // If using body: Problem may be that text inside <script> tags is included in .text() - but not in cheerio?
    // If using div.contents - works
    var fullURL = $(location).attr('href');
    var splitURL = fullURL.split("?");  // Get param string: content after "?" in URL
    if (splitURL.length > 1) {          // If any content after "?"
      var paramStr = splitURL[1];
      var params = paramStr.split("&"); // Split params on "&"
      for (i = 0; i < params.length; i++) {
        var paramPair = params[i].split("=");
        if (paramPair[0] == "pos") {     // If any param starts "pos", get the content after "="
          posStr = paramPair[1];
          var splitPos = posStr.split(",");
          var termArray = [];
        // termArray will have the search terms
            for (i=0; i < splitPos.length; i += 2) {
            start = splitPos[i];
            len = splitPos[i+1]; // Needs error detection! Vulnerable if non-even # of pos entries
            term = bodyText.substr(start,len);
            if (termArray.includes(term) == false) {     // List all unique terms
                termArray.push(bodyText.substr(start,len));
            }
          }
    //      console.log(termArray);
          var context = document.querySelector("div.contents");
          var instance = new Mark(context);
          for(i=0;i<termArray.length; i+=1) {
            instance.mark(termArray[i],options);  // Use Mark.js to mark all terms in termArray
            }
          var firstMark = document.querySelector("mark");
          firstMark.scrollIntoView(true);
          //      console.log($("mark").first().text()); // Trying to scroll to first Mark element.
        }
            }
    }
  });
</script>

<link href="fsp_customdoxygen.css" rel="stylesheet" type="text/css" />

<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


<!-- Lunr search results -->
<div id="lunrResultBox" style="
        position: fixed;
        border: 1px solid black;
        background-color: WhiteSmoke;
        padding: 10px;
        width: 500px;
        height: 500px;
        top: 30;
        right: 0;
        overflow: auto;
        display: none">
    <button onclick="closeLunrResults()" style="float: right;">X</button>
    <div class="resultCount" id="resultCount"></div>
    <div id="searchResults"></div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">External IRQ (r_icu)<div class="ingroups"><a class="el" href="group___r_e_n_e_s_a_s___m_o_d_u_l_e_s.html">Modules</a> &raquo; <a class="el" href="group___r_e_n_e_s_a_s___i_n_p_u_t___m_o_d_u_l_e_s.html">Input</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga036e85b235d213b257cae159b9eba0a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#ga036e85b235d213b257cae159b9eba0a3">R_ICU_ExternalIrqOpen</a> (<a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ga3dc909b21d5ebe0d1d671221e4190246">external_irq_ctrl_t</a> *const p_api_ctrl, <a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#structexternal__irq__cfg__t">external_irq_cfg_t</a> const *const p_cfg)</td></tr>
<tr class="separator:ga036e85b235d213b257cae159b9eba0a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga56b7181d7a70a5b8655659d760993ad1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#ga56b7181d7a70a5b8655659d760993ad1">R_ICU_ExternalIrqEnable</a> (<a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ga3dc909b21d5ebe0d1d671221e4190246">external_irq_ctrl_t</a> *const p_api_ctrl)</td></tr>
<tr class="separator:ga56b7181d7a70a5b8655659d760993ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4dc732735794d378f56552b06f6c3a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#gae4dc732735794d378f56552b06f6c3a9">R_ICU_ExternalIrqDisable</a> (<a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ga3dc909b21d5ebe0d1d671221e4190246">external_irq_ctrl_t</a> *const p_api_ctrl)</td></tr>
<tr class="separator:gae4dc732735794d378f56552b06f6c3a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7db860d077c21ba54a2c3bc5cf0553f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#ga7db860d077c21ba54a2c3bc5cf0553f0">R_ICU_ExternalIrqCallbackSet</a> (<a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ga3dc909b21d5ebe0d1d671221e4190246">external_irq_ctrl_t</a> *const p_api_ctrl, void(*p_callback)(<a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#structexternal__irq__callback__args__t">external_irq_callback_args_t</a> *), void *const p_context, <a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#structexternal__irq__callback__args__t">external_irq_callback_args_t</a> *const p_callback_memory)</td></tr>
<tr class="separator:ga7db860d077c21ba54a2c3bc5cf0553f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad72351c30a832867210c310e1f718ca0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#gad72351c30a832867210c310e1f718ca0">R_ICU_ExternalIrqClose</a> (<a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ga3dc909b21d5ebe0d1d671221e4190246">external_irq_ctrl_t</a> *const p_api_ctrl)</td></tr>
<tr class="separator:gad72351c30a832867210c310e1f718ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Driver for the ICU peripheral on RA MCUs. This module implements the <a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html">External IRQ Interface</a>. </p>
<h1><a class="anchor" id="r-icu-overview"></a>
Overview</h1>
<p>The Interrupt Controller Unit (ICU) controls which event signals are linked to the NVIC, DTC, and DMAC modules. The R_ICU software module only implements the <a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html">External IRQ Interface</a>. The external_irq interface is for configuring interrupts to fire when a trigger condition is detected on an external IRQ pin.</p>
<dl class="section note"><dt>Note</dt><dd>Multiple instances are used when more than one external interrupt is needed. Configure each instance with different channels and properties as needed for the specific interrupt.</dd></dl>
<h2><a class="anchor" id="r-icu-features"></a>
Features</h2>
<p><a class="anchor" id="um_icu_enable_external_irq"></a><a class="anchor" id="um_icu_disable_external_irq"></a><a class="anchor" id="um_icu_open_rising_edge"></a><a class="anchor" id="um_icu_open_falling_edge"></a><a class="anchor" id="um_icu_open_both_edge"></a><a class="anchor" id="um_icu_open_low_level"></a><a class="anchor" id="um_icu_open_callback"></a></p><ul>
<li>Supports configuring interrupts for IRQ pins on the target MCUs<ul>
<li>Enabling and disabling interrupt generation.</li>
<li>Configuring interrupt trigger on rising edge, falling edge, both edges, or low level signal.</li>
<li>Enabling and disabling the IRQ noise filter.</li>
</ul>
</li>
<li>Supports configuring a user callback function, which will be invoked by the HAL module when an external pin interrupt is generated.</li>
</ul>
<h1><a class="anchor" id="r-icu-configuration"></a>
Configuration</h1>
<p><a class="anchor" id="um_icu_open_channel"></a><a class="anchor" id="um_icu_open_priority"></a><a class="anchor" id="um_icu_open_digital_filter"></a><a class="anchor" id="um_icu_open_digital_filter_by_loco"></a> <h2>Build Time Configurations for r_icu</h2>
The following build time configurations are defined in fsp_cfg/r_icu_cfg.h:<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Default</th><th>Description </th></tr>
<tr class="tree_none">
<td>Parameter Checking</td><td><ul style="margin-top:0;margin-bottom:0;">
<li>
Default (BSP)</li>
<li>
Enabled</li>
<li>
Disabled</li>
</ul>
</td><td>Default (BSP) </td><td>If selected code for parameter checking is included in the build. </td></tr>
</table>
 <h2>Configurations for Input &gt; External IRQ (r_icu)</h2>
This module can be added to the Stacks tab via New Stack &gt; Input &gt; External IRQ (r_icu). Non-secure callable guard functions can be generated for this module by right clicking the module in the RA Configuration tool and checking the "Non-secure Callable" box.<br />
</p><table class="doxtable">
<tr>
<th>Configuration</th><th>Options</th><th>Default</th><th>Description </th></tr>
<tr class="tree_none">
<td>Name</td><td>Name must be a valid C symbol</td><td>g_external_irq0 </td><td>Module name. </td></tr>
<tr class="tree_none">
<td>Channel</td><td>Value must be a non-negative integer</td><td>0 </td><td>Specify the hardware channel. </td></tr>
<tr class="tree_none">
<td>Trigger</td><td>MCU Specific Options</td><td></td><td>Select the signal edge or state that triggers an interrupt. </td></tr>
<tr class="tree_none">
<td>Digital Filtering</td><td>MCU Specific Options</td><td></td><td>Select if the digital noise filter should be enabled. </td></tr>
<tr class="tree_none">
<td>Filter Source</td><td>MCU Specific Options</td><td></td><td>Select the clock source for digital filter (Only affected when the digital filter is enabled). </td></tr>
<tr class="tree_none">
<td>Digital Filtering Sample Clock (Only valid when Digital Filtering is Enabled)</td><td>MCU Specific Options</td><td></td><td>Select the clock divider for the digital noise filter. </td></tr>
<tr class="tree_none">
<td>Callback</td><td>Name must be a valid C symbol</td><td>NULL </td><td>A user callback function can be provided here. If this callback function is provided, it is called from the interrupt service routine (ISR) each time the IRQn triggers </td></tr>
<tr class="tree_none">
<td>Pin Interrupt Priority</td><td>MCU Specific Options</td><td></td><td>Select the PIN interrupt priority. </td></tr>
</table>
</p>
<h2><a class="anchor" id="r-icu-clock-configuration"></a>
Clock Configuration</h2>
<p>The ICU peripheral module doesn't require any specific clock settings.</p>
<dl class="section note"><dt>Note</dt><dd>The digital filter uses PCLKB as the clock source for sampling the IRQ pin.</dd></dl>
<h2><a class="anchor" id="r-icu-pin-configuration"></a>
Pin Configuration</h2>
<p>The pin for the external interrupt channel must be configured as an input with IRQ Input Enabled.</p>
<h3>Limitation</h3>
<p>Pin configuration does not show conflicts when same IRQ is used by multiple pins.</p>
<h1><a class="anchor" id="r-icu-usage_notes"></a>
Usage Notes</h1>
<h2>Digital Filter</h2>
<p>The digital filter is used to reject trigger conditions that are too short. The trigger condition must be longer than three periods of the filter clock. The filter clock frequency is determined by PCLKB and the external_irq_pclk_div_t setting.</p>
<p><code>MIN_PULSE_WIDTH = EXTERNAL_IRQ_PCLKB_DIV / PCLKB_FREQUENCY * 3</code></p>
<h2>DMAC/DTC</h2>
<p>When using an External IRQ pin to trigger a DMAC/DTC transfer, the External IRQ pin must be opened before the transfer instance is opened.</p>
<h1><a class="anchor" id="r-icu-examples"></a>
Examples</h1>
<h2>Basic Example</h2>
<p>This is a basic example of minimal use of the ICU in an application.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#define ICU_IRQN_PIN    BSP_IO_PORT_02_PIN_06</span></div><div class="line"><span class="preprocessor">#define ICU_IRQN        6</span></div><div class="line"></div><div class="line"><span class="comment">/* Called from icu_irq_isr */</span></div><div class="line"><span class="keywordtype">void</span> external_irq_callback (<a class="code" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#structexternal__irq__callback__args__t">external_irq_callback_args_t</a> * p_args)</div><div class="line">{</div><div class="line">    (void) p_args;</div><div class="line"></div><div class="line">    g_external_irq_complete = 1;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> simple_example ()</div><div class="line">{</div><div class="line">    <span class="comment">/* Example Configuration */</span></div><div class="line">    <a class="code" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#structexternal__irq__cfg__t">external_irq_cfg_t</a> icu_cfg =</div><div class="line">    {</div><div class="line">        .<a class="code" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#a1b7ba67ea2063df052d7cff54d642455">channel</a>          = ICU_IRQN,</div><div class="line">        .trigger          = <a class="code" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#gga2d1960d763da14da209e16fbb972d57ca2d7a4f8fd21fad6f5a671336152d46b0">EXTERNAL_IRQ_TRIG_RISING</a>,</div><div class="line">        .filter_enable    = <span class="keyword">false</span>,</div><div class="line">        .clock_source_div = <a class="code" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#gga739b3c56a0ebe492581dc75c41fd1627a9ee6a36c6bbdc9b1069bd5e06f1a192c">EXTERNAL_IRQ_CLOCK_SOURCE_DIV_1</a>,</div><div class="line">        .p_callback       = external_irq_callback,</div><div class="line">        .p_context        = 0,</div><div class="line">        .ipl              = 0,</div><div class="line">        .irq              = (IRQn_Type) 0,</div><div class="line">    };</div><div class="line"></div><div class="line">    <span class="comment">/* Configure the external interrupt. */</span></div><div class="line">    <a class="code" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> err = <a class="code" href="group___i_c_u.html#ga036e85b235d213b257cae159b9eba0a3">R_ICU_ExternalIrqOpen</a>(&amp;g_icu_ctrl, &amp;icu_cfg);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="comment">/* Enable the external interrupt. */</span></div><div class="line">    <span class="comment">/* Enable not required when used with ELC or DMAC. */</span></div><div class="line">    err = <a class="code" href="group___i_c_u.html#ga56b7181d7a70a5b8655659d760993ad1">R_ICU_ExternalIrqEnable</a>(&amp;g_icu_ctrl);</div><div class="line">    assert(FSP_SUCCESS == err);</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (0 == g_external_irq_complete)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Wait for interrupt. */</span></div><div class="line">    }</div><div class="line">}</div><div class="line"></div></div><!-- fragment --><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structicu__extended__cfg__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#structicu__extended__cfg__t">icu_extended_cfg_t</a></td></tr>
<tr class="separator:structicu__extended__cfg__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structicu__instance__ctrl__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#structicu__instance__ctrl__t">icu_instance_ctrl_t</a></td></tr>
<tr class="separator:structicu__instance__ctrl__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gad1258af39d17814f95bde231e98d8d2d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#gad1258af39d17814f95bde231e98d8d2d">e_external_irq_digital_filter_t</a> </td></tr>
<tr class="separator:gad1258af39d17814f95bde231e98d8d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structicu__extended__cfg__t" id="structicu__extended__cfg__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structicu__extended__cfg__t">&#9670;&nbsp;</a></span>icu_extended_cfg_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct icu_extended_cfg_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Extended ICU interface configuration </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="af0130345eb3afcfc853a0d83c51720a1"></a><a class="el" href="group___i_c_u.html#gad1258af39d17814f95bde231e98d8d2d">e_external_irq_digital_filter_t</a></td>
<td class="fieldname">
filter_src</td>
<td class="fielddoc">
Select digital filter clock source when digital filter is enabled. </td></tr>
</table>

</div>
</div>
<a name="structicu__instance__ctrl__t" id="structicu__instance__ctrl__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structicu__instance__ctrl__t">&#9670;&nbsp;</a></span>icu_instance_ctrl_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct icu_instance_ctrl_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>ICU private control block. DO NOT MODIFY. Initialization occurs when R_ICU_ExternalIrqOpen is called. </p>
</div><table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:a32cc06f191c3b2a9beb3f5ca38acf5e5"><td class="memItemLeft" align="right" valign="top"><a id="a32cc06f191c3b2a9beb3f5ca38acf5e5"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#a32cc06f191c3b2a9beb3f5ca38acf5e5">open</a></td></tr>
<tr class="memdesc:a32cc06f191c3b2a9beb3f5ca38acf5e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to determine if channel control block is in use. <br /></td></tr>
<tr class="separator:a32cc06f191c3b2a9beb3f5ca38acf5e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c90484eccd464d5e19e6c9bd9c90c8d"><td class="memItemLeft" align="right" valign="top"><a id="a4c90484eccd464d5e19e6c9bd9c90c8d"></a>
IRQn_Type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#a4c90484eccd464d5e19e6c9bd9c90c8d">irq</a></td></tr>
<tr class="memdesc:a4c90484eccd464d5e19e6c9bd9c90c8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">NVIC interrupt number. <br /></td></tr>
<tr class="separator:a4c90484eccd464d5e19e6c9bd9c90c8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f4e264e88054dfe3689d0ec5c4c1ecb"><td class="memItemLeft" align="right" valign="top"><a id="a2f4e264e88054dfe3689d0ec5c4c1ecb"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#a2f4e264e88054dfe3689d0ec5c4c1ecb">channel</a></td></tr>
<tr class="memdesc:a2f4e264e88054dfe3689d0ec5c4c1ecb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Channel. <br /></td></tr>
<tr class="separator:a2f4e264e88054dfe3689d0ec5c4c1ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e49d161e48e7f1f4516ff817ae28aec"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_c_u.html#a2e49d161e48e7f1f4516ff817ae28aec">p_context</a></td></tr>
<tr class="separator:a2e49d161e48e7f1f4516ff817ae28aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Field Documentation</h4>
<a id="a2e49d161e48e7f1f4516ff817ae28aec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e49d161e48e7f1f4516ff817ae28aec">&#9670;&nbsp;</a></span>p_context</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* icu_instance_ctrl_t::p_context</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Placeholder for user data. Passed to the user callback in <a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#structexternal__irq__callback__args__t">external_irq_callback_args_t</a>. </p>

</div>
</div>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gad1258af39d17814f95bde231e98d8d2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad1258af39d17814f95bde231e98d8d2d">&#9670;&nbsp;</a></span>e_external_irq_digital_filter_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___i_c_u.html#gad1258af39d17814f95bde231e98d8d2d">e_external_irq_digital_filter_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>External IRQ input pin digital filtering clock selection. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggad1258af39d17814f95bde231e98d8d2da7f2634d4f011174e5e6ab6207516b324"></a>EXTERNAL_IRQ_DIGITAL_FILTER_PCLK_DIV&#160;</td><td class="fielddoc"><p>Digital filter using clock PCLK dividers. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggad1258af39d17814f95bde231e98d8d2da27be01f31dc97ed57ebffbeeb99c66fe"></a>EXTERNAL_IRQ_DIGITAL_FILTER_LOCO&#160;</td><td class="fielddoc"><p>Digital filter using clock LOCO. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga036e85b235d213b257cae159b9eba0a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga036e85b235d213b257cae159b9eba0a3">&#9670;&nbsp;</a></span>R_ICU_ExternalIrqOpen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ICU_ExternalIrqOpen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ga3dc909b21d5ebe0d1d671221e4190246">external_irq_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#structexternal__irq__cfg__t">external_irq_cfg_t</a> const *const&#160;</td>
          <td class="paramname"><em>p_cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure an IRQ input pin for use with the external interrupt interface. Implements <a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#a639337eee77555b934cbf8238e0f8449">external_irq_api_t::open</a>.</p>
<p>The Open function is responsible for preparing an external IRQ pin for operation.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Open successful. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>One of the following is invalid:<ul>
<li>p_ctrl or p_cfg is NULL </li>
</ul>
</td></tr>
    <tr><td class="paramname">FSP_ERR_ALREADY_OPEN</td><td>The channel specified has already been opened. No configurations were changed. Call the associated Close function to reconfigure the channel. </td></tr>
    <tr><td class="paramname">FSP_ERR_IP_CHANNEL_NOT_PRESENT</td><td>The channel requested in p_cfg is not available on the device selected in r_bsp_cfg.h. </td></tr>
    <tr><td class="paramname">FSP_ERR_INVALID_ARGUMENT</td><td>p_cfg-&gt;p_callback is not NULL, but ISR is not enabled. ISR must be enabled to use callback function. </td></tr>
    <tr><td class="paramname">FSP_ERR_UNSUPPORTED</td><td>An input argument is not supported by selected mode.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function is reentrant for different channels. It is not reentrant for the same channel. </dd></dl>

</div>
</div>
<a id="ga56b7181d7a70a5b8655659d760993ad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga56b7181d7a70a5b8655659d760993ad1">&#9670;&nbsp;</a></span>R_ICU_ExternalIrqEnable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ICU_ExternalIrqEnable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ga3dc909b21d5ebe0d1d671221e4190246">external_irq_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable external interrupt for specified channel at NVIC. Implements <a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#a9cb81e4b2d313458c747cdc401179a66">external_irq_api_t::enable</a>.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Interrupt Enabled successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>The p_ctrl parameter was null. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>The channel is not opened. </td></tr>
    <tr><td class="paramname">FSP_ERR_IRQ_BSP_DISABLED</td><td>Requested IRQ is not defined in this system </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae4dc732735794d378f56552b06f6c3a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae4dc732735794d378f56552b06f6c3a9">&#9670;&nbsp;</a></span>R_ICU_ExternalIrqDisable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ICU_ExternalIrqDisable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ga3dc909b21d5ebe0d1d671221e4190246">external_irq_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disable external interrupt for specified channel at NVIC. Implements <a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#a6ecb5664f627d1b731a4fd0a74e5f2bc">external_irq_api_t::disable</a>.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Interrupt disabled successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>The p_ctrl parameter was null. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>The channel is not opened. </td></tr>
    <tr><td class="paramname">FSP_ERR_IRQ_BSP_DISABLED</td><td>Requested IRQ is not defined in this system </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7db860d077c21ba54a2c3bc5cf0553f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7db860d077c21ba54a2c3bc5cf0553f0">&#9670;&nbsp;</a></span>R_ICU_ExternalIrqCallbackSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ICU_ExternalIrqCallbackSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ga3dc909b21d5ebe0d1d671221e4190246">external_irq_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#structexternal__irq__callback__args__t">external_irq_callback_args_t</a> *)&#160;</td>
          <td class="paramname"><em>p_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>p_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#structexternal__irq__callback__args__t">external_irq_callback_args_t</a> *const&#160;</td>
          <td class="paramname"><em>p_callback_memory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the user callback and has option of providing memory for callback structure. Implements <a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ae632875adf1c82d7344e212cd1fbb67a">external_irq_api_t::callbackSet</a></p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Callback updated successfully. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>A required pointer is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>The control block has not been opened. </td></tr>
    <tr><td class="paramname">FSP_ERR_NO_CALLBACK_MEMORY</td><td>p_callback is non-secure and p_callback_memory is either secure or NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad72351c30a832867210c310e1f718ca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad72351c30a832867210c310e1f718ca0">&#9670;&nbsp;</a></span>R_ICU_ExternalIrqClose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___r_e_n_e_s_a_s___e_r_r_o_r___c_o_d_e_s.html#gadfb1288da0fcc7ae1dc88c58601374f8">fsp_err_t</a> R_ICU_ExternalIrqClose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ga3dc909b21d5ebe0d1d671221e4190246">external_irq_ctrl_t</a> *const&#160;</td>
          <td class="paramname"><em>p_api_ctrl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the external interrupt channel. Implements <a class="el" href="group___e_x_t_e_r_n_a_l___i_r_q___a_p_i.html#ad0c4d6063af093a3a19a63924aae61ac">external_irq_api_t::close</a>.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">FSP_SUCCESS</td><td>Successfully closed. </td></tr>
    <tr><td class="paramname">FSP_ERR_ASSERTION</td><td>The parameter p_ctrl is NULL. </td></tr>
    <tr><td class="paramname">FSP_ERR_NOT_OPEN</td><td>The channel is not opened. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
        <li class="footer">FSP Release v6.2.0 User's Manual Copyright © (2025) Renesas Electronics Corporation. All Rights Reserved.</li>
  </ul>
</div>
</body>
</html>
